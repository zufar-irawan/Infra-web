(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5563],{6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9540:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},18514:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},35299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},60230:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,i:()=>r});var s=a(12115);let l=(0,s.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),r=()=>(0,s.useContext)(l),n=l},61762:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=a(95155),l=a(88730),r=a(60230),n=a(66348),i=a(68407),d=a.n(i),o=a(71360),u=a(35299),c=a(71847);let m=(0,c.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var x=a(89559);let h=(0,c.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var p=a(6191),g=a(18514),b=a(12115);let f=[{value:"absen_masuk",label:"Absen Masuk"},{value:"absen_pulang",label:"Absen Pulang"},{value:"tidak_absen_masuk",label:"Tidak Absen Masuk"},{value:"tidak_absen_pulang",label:"Tidak Absen Pulang"}],v=[{value:"tepat_waktu",label:"Tepat Waktu"},{value:"telat",label:"Telat"},{value:"sakit",label:"Sakit"},{value:"izin",label:"Izin"},{value:"alfa",label:"Alpha"}],y={tepat_waktu:"bg-emerald-100 text-emerald-700",telat:"bg-amber-100 text-amber-700",sakit:"bg-sky-100 text-sky-700",izin:"bg-indigo-100 text-indigo-700",alfa:"bg-rose-100 text-rose-700"},j={absen_masuk:"bg-emerald-50 text-emerald-600",absen_pulang:"bg-sky-50 text-sky-600",tidak_absen_masuk:"bg-amber-50 text-amber-600",tidak_absen_pulang:"bg-rose-50 text-rose-600"},N=f.reduce((e,t)=>(e[t.value]=t.label,e),{}),k=()=>sessionStorage.getItem("token"),w={id:null,class_id:"",student_id:"",date:"",attendance_status:"absen_masuk",status:"tepat_waktu",time_in:"",time_out:"",description:""};function _(){let{user:e,student:t,teacher:a,students:i,classes:c}=(0,r.i)(),_=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="guru",[A,C]=(0,b.useState)([]),[M,S]=(0,b.useState)(!0),[I,T]=(0,b.useState)(null!=i?i:[]),[z,B]=(0,b.useState)({classId:"all",studentId:"all",date:""}),[D,P]=(0,b.useState)("all"),[E,L]=(0,b.useState)(!1),[W,R]=(0,b.useState)("create"),[U,G]=(0,b.useState)(w),[O,K]=(0,b.useState)(!1),q=(0,b.useMemo)(()=>null!=c?c:[],[c]);(0,b.useEffect)(()=>{i&&i.length&&T(i)},[i]);let H=(0,b.useCallback)(async()=>{if(!_||i&&i.length)return;let e=k();if(e)try{var t,a;let s=await n.A.get("/lms/students",{headers:{Authorization:"Bearer ".concat(e)}}),l=Array.isArray(s.data)?s.data:null!=(a=null==(t=s.data)?void 0:t.data)?a:[];T(l)}catch(e){console.error("Gagal mengambil daftar siswa",e)}},[_,i]),F=(0,b.useCallback)(async()=>{var t,a,s,l,r;let i=k();if(!i||!e)return void S(!1);S(!0);try{let e=await n.A.get("/lms/attendance",{headers:{Authorization:"Bearer ".concat(i)}}),s=Array.isArray(e.data)?e.data:null!=(a=null==(t=e.data)?void 0:t.data)?a:[];C(s)}catch(e){console.error("Gagal mengambil data presensi",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(l=e.response)||null==(s=l.data)?void 0:s.message)?r:"Tidak dapat mengambil data presensi."})}finally{S(!1)}},[e]);(0,b.useEffect)(()=>{e&&(F(),H())},[e,F,H]);let J=(0,b.useMemo)(()=>{if(!I)return[];if("all"===z.classId||!z.classId)return I;let e=Number(z.classId);return I.filter(t=>{var a,s,l;return Number(null!=(l=null!=(s=t.class_id)?s:null==(a=t.class)?void 0:a.id)?l:null)===e})},[I,z.classId]),V=(0,b.useMemo)(()=>{if(!I)return[];if(!U.class_id)return I;let e=Number(U.class_id);return I.filter(t=>{var a,s,l;return Number(null!=(l=null!=(s=t.class_id)?s:null==(a=t.class)?void 0:a.id)?l:null)===e})},[I,U.class_id]),Z=(0,b.useMemo)(()=>{let e=[..."all"===D?A:A.filter(e=>{var t;return(null!=(t=e.status)?t:"tepat_waktu")===D})].sort((e,t)=>{var a,s;let l=new Date("".concat(e.date,"T").concat(null!=(a=e.time_in)?a:"00:00"));return new Date("".concat(t.date,"T").concat(null!=(s=t.time_in)?s:"00:00")).getTime()-l.getTime()});return!_&&(null==t?void 0:t.id)?e.filter(e=>Number(e.student_id)===Number(t.id)):e},[A,D,_,null==t?void 0:t.id]),$=(0,b.useMemo)(()=>I&&I.length?I.reduce((e,t)=>{var a;let s=Number(null!=(a=t.id)?a:t.student_id);return Number.isNaN(s)||e.set(s,t),e},new Map):new Map,[I]),Q=(0,b.useMemo)(()=>{let e=A.length,t=A.filter(e=>["absen_masuk","absen_pulang"].includes(e.attendance_status)).length;return{total:e,hadir:t,telat:A.filter(e=>"telat"===e.status).length,izin:A.filter(e=>"izin"===e.status).length}},[A]),X=async()=>{var e,t,a,s,l,r,i;if(!_)return;let o=k();if(o){S(!0);try{let l={};"all"!==z.classId&&z.classId&&(l.class_id=z.classId),"all"!==z.studentId&&z.studentId&&(l.student_id=z.studentId),z.date&&(l.date=z.date);let r=[];if(Object.keys(l).length>0){let a=await n.A.get("/lms/attendance-filter",{headers:{Authorization:"Bearer ".concat(o)},params:l});r=Array.isArray(a.data)?a.data:null!=(t=null==(e=a.data)?void 0:e.data)?t:[]}else{let e=await n.A.get("/lms/attendance",{headers:{Authorization:"Bearer ".concat(o)}});r=Array.isArray(e.data)?e.data:null!=(s=null==(a=e.data)?void 0:a.data)?s:[]}C(r)}catch(e){console.error("Gagal menerapkan filter",e),d().fire({icon:"error",title:"Gagal",text:null!=(i=null==e||null==(r=e.response)||null==(l=r.data)?void 0:l.message)?i:"Tidak dapat menerapkan filter presensi."})}finally{S(!1)}}},Y=()=>{L(!1),G(w)},ee=(e,t)=>{G(a=>({...a,[e]:t})),"class_id"===e&&G(e=>({...e,student_id:""}))},et=async e=>{e.preventDefault();let t=k();if(!t)return void d().fire({icon:"warning",title:"Tidak ada token"});if(!U.class_id||!U.student_id||!U.date)return void d().fire({icon:"warning",title:"Lengkapi data",text:"Kelas, siswa, dan tanggal wajib diisi."});let a={class_id:Number(U.class_id),student_id:Number(U.student_id),date:U.date,attendance_status:U.attendance_status,status:U.status,time_in:U.time_in||null,time_out:U.time_out||null,description:U.description||null};K(!0);try{"create"===W?(await n.A.post("/lms/attendance",a,{headers:{Authorization:"Bearer ".concat(t)}}),d().fire({icon:"success",title:"Berhasil",text:"Presensi berhasil dibuat."})):null!==U.id&&(await n.A.put("/lms/attendance/".concat(U.id),a,{headers:{Authorization:"Bearer ".concat(t)}}),d().fire({icon:"success",title:"Berhasil",text:"Presensi berhasil diperbarui."})),Y(),F()}catch(e){var s,l,r;console.error("Gagal menyimpan presensi",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(l=e.response)||null==(s=l.data)?void 0:s.message)?r:"Terjadi kesalahan saat menyimpan presensi."})}finally{K(!1)}},ea=async e=>{if(!(await d().fire({icon:"warning",title:"Hapus presensi?",text:"Data yang dihapus tidak dapat dikembalikan.",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal"})).isConfirmed)return;let t=k();if(t)try{await n.A.delete("/lms/attendance/".concat(e.id),{headers:{Authorization:"Bearer ".concat(t)}}),d().fire({icon:"success",title:"Berhasil",text:"Presensi dihapus."}),F()}catch(e){var a,s,l;console.error("Gagal menghapus presensi",e),d().fire({icon:"error",title:"Gagal",text:null!=(l=null==e||null==(s=e.response)||null==(a=s.data)?void 0:a.message)?l:"Tidak dapat menghapus presensi."})}};return(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,s.jsx)(l.A,{user:e,student:t,teacher:a}),(0,s.jsxs)("section",{className:"w-full space-y-4 px-4 pb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Total Catatan"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:Q.total}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Jumlah seluruh catatan presensi"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Kehadiran"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-semibold text-emerald-600",children:Q.hadir}),(0,s.jsx)("p",{className:"text-xs text-emerald-500",children:"Tercatat hadir"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Terlambat"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-semibold text-amber-600",children:Q.telat}),(0,s.jsx)("p",{className:"text-xs text-amber-500",children:"Kedatangan terhitung telat"})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Izin/Sakit"}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-semibold text-sky-600",children:Q.izin}),(0,s.jsx)("p",{className:"text-xs text-sky-500",children:"Izin atau sakit"})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,s.jsxs)("div",{className:"grid w-full grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Kelas"}),(0,s.jsxs)("select",{value:z.classId,onChange:e=>B(t=>({...t,classId:e.target.value,studentId:"all"})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"all",children:"Semua kelas"}),null==q?void 0:q.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Siswa"}),(0,s.jsxs)("select",{value:z.studentId,onChange:e=>B(t=>({...t,studentId:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"all",children:"Semua siswa"}),J.map(e=>{var t,a,l,r;return(0,s.jsx)("option",{value:e.id,children:null!=(r=null!=(l=null==(t=e.user)?void 0:t.name)?l:null==(a=e.user)?void 0:a.username)?r:"Siswa ".concat(e.id)},e.id)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Tanggal"}),(0,s.jsx)("input",{type:"date",value:z.date,onChange:e=>B(t=>({...t,date:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200"})]})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:justify-end",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-2 sm:flex-none",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase text-gray-500",children:"Status"}),(0,s.jsxs)("select",{value:D,onChange:e=>P(e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200 sm:w-40",children:[(0,s.jsx)("option",{value:"all",children:"Semua"}),v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),_&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:X,className:"inline-flex items-center gap-2 rounded-xl border border-orange-200 px-4 py-2 text-sm font-medium text-orange-600 hover:bg-orange-50",children:[(0,s.jsx)(m,{className:"h-4 w-4"})," Terapkan"]}),(0,s.jsxs)("button",{onClick:()=>{B({classId:"all",studentId:"all",date:""}),P("all"),F()},className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"})," Reset"]})]})]})]}),_&&(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)(h,{className:"h-4 w-4"}),z.date?(0,s.jsxs)("span",{children:["Menampilkan presensi tanggal ",new Date(z.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})]}):(0,s.jsx)("span",{children:"Menampilkan semua tanggal"})]}),(0,s.jsxs)("button",{onClick:()=>{var t,s,l;R("create"),G({...w,date:new Date().toISOString().slice(0,10),class_id:(null==e?void 0:e.role)==="guru"?String(null!=(l=null!=(s=null==a?void 0:a.class_id)?s:null==a||null==(t=a.class)?void 0:t.id)?l:""):""}),L(!0)},className:"inline-flex items-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"})," Tambah Presensi"]})]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-100 text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-xs font-semibold uppercase text-gray-500",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Tanggal"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Siswa"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Kelas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Masuk"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Pulang"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Jenis"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Catatan"}),_&&(0,s.jsx)("th",{className:"px-6 py-3 text-right",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:M?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:_?8:7,className:"px-6 py-10 text-center text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 animate-spin text-orange-500"}),"Memuat data presensi..."]})})}):0===Z.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:_?8:7,className:"px-6 py-12 text-center text-sm font-medium text-gray-500",children:"Belum ada data presensi yang cocok."})}):Z.map(e=>{var t,a,l,r,n,i,d,u,c,m,x,h,p,b,f;let k=$.get(Number(e.student_id)),w=null!=(p=null!=(h=null!=(x=null!=(m=null!=(c=null==(a=e.student)||null==(t=a.user)?void 0:t.name)?c:null==(r=e.student)||null==(l=r.user)?void 0:l.username)?m:null==k||null==(n=k.user)?void 0:n.name)?x:null==k||null==(i=k.user)?void 0:i.username)?h:null==k?void 0:k.name)?p:"-",A=null!=(b=null==(d=e.class)?void 0:d.name)?b:"-",C=e.time_in?e.time_in.slice(0,5):"-",M=e.time_out?e.time_out.slice(0,5):"-";return(0,s.jsxs)("tr",{className:"hover:bg-orange-50/40",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(e.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:w}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:A}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:C}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:M}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat(y[e.status]),children:null!=(f=null==(u=v.find(t=>t.value===e.status))?void 0:u.label)?f:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat(j[e.attendance_status]),children:N[e.attendance_status]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.description||"-"}),_&&(0,s.jsx)("td",{className:"px-6 py-4 text-right text-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{var t,a,s;R("edit"),G({id:e.id,class_id:e.class_id?String(e.class_id):"",student_id:e.student_id?String(e.student_id):"",date:e.date,attendance_status:e.attendance_status,status:e.status,time_in:(null!=(t=e.time_in)?t:"").slice(0,5),time_out:(null!=(a=e.time_out)?a:"").slice(0,5),description:null!=(s=e.description)?s:""}),L(!0)},className:"inline-flex items-center gap-1 rounded-lg border border-emerald-200 px-3 py-1.5 text-xs font-medium text-emerald-600 hover:bg-emerald-50",children:[(0,s.jsx)(g.A,{className:"h-3.5 w-3.5"})," Edit"]}),(0,s.jsxs)("button",{onClick:()=>ea(e),className:"inline-flex items-center gap-1 rounded-lg border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50",children:[(0,s.jsx)(o.A,{className:"h-3.5 w-3.5"})," Hapus"]})]})})]},e.id)})})]})})})]}),E?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl bg-white shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"create"===W?"Tambah Presensi":"Edit Presensi"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Isi form berikut untuk ","create"===W?"mencatat":"memperbarui"," presensi siswa."]})]}),(0,s.jsxs)("button",{onClick:Y,className:"rounded-full p-2 text-gray-500 hover:bg-gray-100","aria-label":"Tutup",children:[(0,s.jsx)(o.A,{className:"hidden"}),(0,s.jsx)("span",{className:"text-xl leading-none",children:"\xd7"})]})]}),(0,s.jsxs)("form",{onSubmit:et,className:"grid gap-4 px-6 py-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Kelas"}),(0,s.jsxs)("select",{value:U.class_id,onChange:e=>ee("class_id",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih kelas"}),null==q?void 0:q.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Siswa"}),(0,s.jsxs)("select",{value:U.student_id,onChange:e=>ee("student_id",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Pilih siswa"}),V.map(e=>{var t,a,l,r;return(0,s.jsx)("option",{value:e.id,children:null!=(r=null!=(l=null==(t=e.user)?void 0:t.name)?l:null==(a=e.user)?void 0:a.username)?r:"Siswa ".concat(e.id)},e.id)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Tanggal"}),(0,s.jsx)("input",{type:"date",value:U.date,onChange:e=>ee("date",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Masuk"}),(0,s.jsx)("input",{type:"time",value:U.time_in,onChange:e=>ee("time_in",e.target.value),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Pulang"}),(0,s.jsx)("input",{type:"time",value:U.time_out,onChange:e=>ee("time_out",e.target.value),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Jenis Kehadiran"}),(0,s.jsx)("select",{value:U.attendance_status,onChange:e=>ee("attendance_status",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:f.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Status"}),(0,s.jsx)("select",{value:U.status,onChange:e=>ee("status",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Catatan"}),(0,s.jsx)("textarea",{value:U.description,onChange:e=>ee("description",e.target.value),rows:3,className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Tambahkan keterangan tambahan (opsional)"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 border-t border-gray-100 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:Y,className:"rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Batal"}),(0,s.jsxs)("button",{type:"submit",disabled:O,className:"inline-flex items-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-70",children:[O&&(0,s.jsx)(u.A,{className:"h-4 w-4 animate-spin"}),"create"===W?"Simpan":"Perbarui"]})]})]})]})}):null]})}},66348:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(95125),l=a(72378);let r=s.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=l.A.get("portal-auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n=r},71360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(12115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:u,iconNode:c,...m}=e;return(0,s.createElement)("svg",{ref:t,...n,width:l,height:l,stroke:a,strokeWidth:d?24*Number(i)/Number(l):i,className:r("lucide",o),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...c.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),d=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:d,...o}=a;return(0,s.createElement)(i,{ref:n,iconNode:t,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return a.displayName=l(e),a}},72378:(e,t,a)=>{"use strict";function s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)e[s]=a[s]}return e}a.d(t,{A:()=>l});var l=function e(t,a){function l(e,l,r){if("undefined"!=typeof document){"number"==typeof(r=s({},a,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in r)r[i]&&(n+="; "+i,!0!==r[i]&&(n+="="+r[i].split(";")[0]));return document.cookie=e+"="+t.write(l,e)+n}}return Object.create({set:l,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],s={},l=0;l<a.length;l++){var r=a[l].split("="),n=r.slice(1).join("=");try{var i=decodeURIComponent(r[0]);if(s[i]=t.read(n,i),e===i)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){l(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},88730:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155),l=a(9540);function r(e){let{student:t,user:a,teacher:r}=e,n=window.location.pathname,i=(null==t?void 0:t.class.name)||"Tidak ada kelas",d=(null==a?void 0:a.role)||"guest",o=(null==r?void 0:r.specialization)||"Tidak ada mapel";return(0,s.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,s.jsx)(l.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case n.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case n.startsWith("/edu/tugas"):return"Tugas Anda";case n.startsWith("/edu/ujian"):return"Ujian Anda";case n.startsWith("/edu/nilai"):return"Nilai Anda";case n.startsWith("/edu/jadwal"):return"Jadwal";case n.startsWith("/edu/setelan"):return"Setelan";case n.startsWith("/edu/perangkat"):return"Perangkat";case n.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,s.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==a?void 0:a.name)||"Loading...","."]})]})]}),(0,s.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==a?void 0:a.role)==="siswa"?i.replaceAll("-"," "):(null==a?void 0:a.role)==="guru"?o.replaceAll("-"," "):(null==a?void 0:a.role)==="admin"?"Administrator":"Tamu"})]})}a(12115)},89559:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},90118:(e,t,a)=>{Promise.resolve().then(a.bind(a,61762))}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=90118)),_N_E=e.O()}]);