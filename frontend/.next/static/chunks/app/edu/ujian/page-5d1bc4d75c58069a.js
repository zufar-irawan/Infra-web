(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6591],{6099:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var s=t(95155),l=t(88730),r=t(12115),n=t(65229);function i(e){let{isOpen:a,onClose:t,subjects:l,classes:i,rooms:d,onSubmit:o,isLoading:c}=e,[u,m]=(0,r.useState)({subject_id:"",class_id:"",title:"",description:"",date:"",start_time:"",end_time:"",room_id:""}),[x,h]=(0,r.useState)({}),g=e=>{let{name:a,value:t}=e.target;m(e=>({...e,[a]:t})),x[a]&&h(e=>({...e,[a]:""}))},p=()=>{c||(m({subject_id:"",class_id:"",title:"",description:"",date:"",start_time:"",end_time:"",room_id:""}),h({}),t())};return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Buat Ujian Baru"}),(0,s.jsx)("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(n.A,{className:"w-5 h-5"})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{let e={};return u.subject_id||(e.subject_id="Mata pelajaran harus dipilih"),u.class_id||(e.class_id="Kelas harus dipilih"),u.title.trim()||(e.title="Judul ujian harus diisi"),u.date||(e.date="Tanggal harus dipilih"),u.start_time||(e.start_time="Waktu mulai harus diisi"),u.end_time||(e.end_time="Waktu selesai harus diisi"),u.room_id||(e.room_id="Ruangan harus dipilih"),u.start_time&&u.end_time&&u.start_time>=u.end_time&&(e.end_time="Waktu selesai harus lebih besar dari waktu mulai"),h(e),0===Object.keys(e).length})()&&!c&&o(u)},className:"p-6 space-y-6",children:[c&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-2xl",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Sedang membuat ujian..."})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"subject_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mata Pelajaran *"}),(0,s.jsxs)("select",{id:"subject_id",name:"subject_id",value:u.subject_id,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.subject_id?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":""),children:[(0,s.jsx)("option",{value:"",children:"Pilih Mata Pelajaran"}),l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.subject_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.subject_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"class_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kelas *"}),(0,s.jsxs)("select",{id:"class_id",name:"class_id",value:u.class_id,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.class_id?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":""),children:[(0,s.jsx)("option",{value:"",children:"Pilih Kelas"}),i.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.class_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.class_id})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Ujian *"}),(0,s.jsx)("input",{type:"text",id:"title",name:"title",value:u.title,onChange:g,disabled:c,placeholder:"Masukkan judul ujian",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.title?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":"")}),x.title&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:u.description,onChange:g,disabled:c,placeholder:"Masukkan deskripsi ujian (opsional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none ".concat(c?"bg-gray-100 cursor-not-allowed":"")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal *"}),(0,s.jsx)("input",{type:"date",id:"date",name:"date",value:u.date,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.date?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":"")}),x.date&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Waktu Mulai *"}),(0,s.jsx)("input",{type:"time",id:"start_time",name:"start_time",value:u.start_time,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.start_time?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":"")}),x.start_time&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.start_time})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"end_time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Waktu Selesai *"}),(0,s.jsx)("input",{type:"time",id:"end_time",name:"end_time",value:u.end_time,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.end_time?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":"")}),x.end_time&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.end_time})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"room_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ruangan *"}),(0,s.jsxs)("select",{id:"room_id",name:"room_id",value:u.room_id,onChange:g,disabled:c,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat(x.room_id?"border-red-500":"border-gray-300"," ").concat(c?"bg-gray-100 cursor-not-allowed":""),children:[(0,s.jsx)("option",{value:"",children:"Pilih Ruangan"}),d.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.room_id&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.room_id})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,s.jsx)("button",{type:"button",onClick:p,disabled:c,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors ".concat(c?"opacity-50 cursor-not-allowed":""),children:"Batal"}),(0,s.jsxs)("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors flex items-center gap-2 ".concat(c?"opacity-75 cursor-not-allowed":""),children:[c&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c?"Membuat Ujian...":"Buat Ujian"]})]})]})]})}):null}var d=t(60230),o=t(95775),c=t(26467),u=t(72226);function m(e){let{ujian:a}=e,t=a.date,l=(0,o.GP)((0,c.H)(t),"dd MMMM yyyy",{locale:u.id});return(0,s.jsx)("div",{className:"divide-y divide-black/10",children:(0,s.jsx)("div",{className:"flex items-start sm:items-center justify-between py-4 gap-2",children:(0,s.jsxs)("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:a.title}),(0,s.jsxs)("p",{className:"text-black/60 text-sm",children:[a.subject.name," \xb7 ",a.creator.name]})]}),(0,s.jsxs)("p",{className:"text-xs text-orange-700",children:["Tenggat ",l.toString()]})]})})})}var x=t(12108),h=t(24033),g=t(20063),p=t(95125);let j=e=>{if(!e)return[];if(Array.isArray(e))return e;if("object"==typeof e){if(Array.isArray(e.data))return e.data;if(Array.isArray(e.items))return e.items;if(Array.isArray(e.rows))return e.rows}return[]},b=e=>null==e?null:String(e);function f(){let e=(0,g.useRouter)(),{user:a,student:t,exams:n,subjects:o,classes:c,rooms:u,teacher:f}=(0,d.i)(),v=(null==a?void 0:a.role)==="siswa",w=(null==a?void 0:a.role)==="guru"||(null==a?void 0:a.role)==="admin",[y,N]=(0,r.useState)(0),[k,_]=(0,r.useState)(""),[C,S]=(0,r.useState)("all"),[M,L]=(0,r.useState)("all"),[A,B]=(0,r.useState)({}),[P,W]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),U=(0,r.useMemo)(()=>j(o),[o]),R=(0,r.useMemo)(()=>j(c),[c]),I=(0,r.useMemo)(()=>j(u),[u]),E=(0,r.useMemo)(()=>{var e,a,s;return b(null!=(s=null!=(a=null==t||null==(e=t.class)?void 0:e.id)?a:null==t?void 0:t.class_id)?s:null==t?void 0:t.classId)},[t]),F=(0,r.useMemo)(()=>{var e;let a=j(null==n?void 0:n.exams);if(a.length>0)return a;let t=j(null==n||null==(e=n.exams)?void 0:e.data);if(t.length>0)return t;let s=j(null==n?void 0:n.data);return s.length>0?s:j(n)},[n]),K=(0,r.useMemo)(()=>{if(!F.length)return[];let e=new Map(U.map(e=>{var a;return[null!=(a=e.id)?a:e.subject_id,e]})),a=new Map(R.map(e=>{var a;return[null!=(a=e.id)?a:e.class_id,e]})),t=new Map(I.map(e=>{var a;return[null!=(a=e.id)?a:e.room_id,e]}));return F.map(s=>{var l,r,n,i,d,o,c,u,m,x,h,g,p,j,b,f,v;let w=null!=(d=null!=(i=s.subject_id)?i:s.subjectId)?d:null==(l=s.subject)?void 0:l.id,y=null!=(c=null!=(o=s.class_id)?o:s.classId)?c:null==(r=s.class)?void 0:r.id,N=null!=(m=null!=(u=s.room_id)?u:s.roomId)?m:null==(n=s.room)?void 0:n.id,k=((e,a,t)=>{if(!e||!a||!t)return"upcoming";let s=new Date("".concat(e,"T").concat(a)),l=new Date("".concat(e,"T").concat(t));if(Number.isNaN(s.getTime())||Number.isNaN(l.getTime()))return"upcoming";let r=new Date;return r<s?"upcoming":r>l?"completed":"ongoing"})(s.date,null!=(x=s.start_time)?x:s.startTime,null!=(h=s.end_time)?h:s.endTime);return{...s,subject:null!=(p=null!=(g=s.subject)?g:e.get(w))?p:null,class:null!=(b=null!=(j=s.class)?j:a.get(y))?b:null,room:null!=(v=null!=(f=s.room)?f:t.get(N))?v:null,scheduleStatus:k}})},[F,U,R,I]),O=(0,r.useMemo)(()=>{if(!v||!E)return{all:[],completed:[],uncompleted:[]};let e=new Set([...j(null==n?void 0:n.selesaiExams),...j(null==n?void 0:n.completedExams)].map(e=>null==e?void 0:e.id).filter(e=>null!=e).map(e=>String(e))),a=K.filter(e=>{var a,t,s;return b(null!=(s=null!=(t=e.class_id)?t:e.classId)?s:null==(a=e.class)?void 0:a.id)===E}).map(a=>({...a,isCompleted:e.has(String(a.id))}));return{all:a,completed:a.filter(e=>e.isCompleted),uncompleted:a.filter(e=>!e.isCompleted)}},[v,E,K,n]),Z=(0,r.useMemo)(()=>w?K.map(e=>({...e,isCompleted:"completed"===e.scheduleStatus})):[],[w,K]),z=w?Z:O.all,G=(0,r.useMemo)(()=>Array.from(new Set(z.map(e=>{var a,t;return null!=(t=null==(a=e.subject)?void 0:a.name)?t:"Mata Pelajaran Lain"}))),[z]),H=(0,r.useMemo)(()=>z.filter(e=>{var a,t,s;let l=null!=(t=null==(a=e.subject)?void 0:a.name)?t:"Mata Pelajaran Lain",r=(null!=(s=e.title)?s:"").toLowerCase(),n=k.trim().toLowerCase();return!!(""===n||l.toLowerCase().includes(n)||r.includes(n))&&("all"===C||l===C)&&("all"===M||(w?e.scheduleStatus===M:"selesai"===M?!!e.isCompleted:"belum"!==M||!e.isCompleted))}),[z,k,C,M,w]),J=(0,r.useMemo)(()=>H.reduce((e,a)=>{var t,s;let l=null!=(s=null==(t=a.subject)?void 0:t.name)?s:"Mata Pelajaran Lain";return e[l]||(e[l]=[]),e[l].push(a),e},{}),[H]),q=(0,r.useMemo)(()=>Object.entries(J),[J]),X=(0,r.useMemo)(()=>w?Z.reduce((e,a)=>("completed"===a.scheduleStatus?e.completed+=1:"ongoing"===a.scheduleStatus?e.ongoing+=1:e.upcoming+=1,e),{total:Z.length,upcoming:0,ongoing:0,completed:0}):{total:O.all.length,upcoming:0,ongoing:0,completed:O.completed.length},[w,Z,O]),Y=O.uncompleted,Q=O.completed,V=Y.length;(0,r.useEffect)(()=>{v&&N(0)},[v,V]);let $=(0,r.useCallback)(()=>{V>0&&N(e=>(e+1)%V)},[V]),ee=(0,r.useCallback)(()=>{V>0&&N(e=>(e-1+V)%V)},[V]),ea=(0,r.useCallback)(e=>{B(a=>({...a,[e]:!a[e]}))},[]),et=(0,r.useCallback)(()=>{_(""),S("all"),L("all")},[]),es=(0,r.useCallback)(async e=>{var t,s,l,r,n,i,d,o,c,u,m,x,h,g,j;try{D(!0);let u=null!=(s=null!=(t=e.created_by)?t:null==f?void 0:f.user_id)?s:null==a?void 0:a.id,m=null!=u?Number(u):void 0,x={subject_id:Number(null!=(l=e.subject_id)?l:e.subjectId),class_id:Number(null!=(r=e.class_id)?r:e.classId),title:String(null!=(n=e.title)?n:""),description:String(null!=(i=e.description)?i:""),date:String(e.date),start_time:String(null!=(d=e.start_time)?d:e.startTime),end_time:String(null!=(o=e.end_time)?o:e.endTime),room_id:Number(null!=(c=e.room_id)?c:e.roomId),created_by:m},h=await p.A.post("/api/exams",x);(200===h.status||201===h.status)&&(alert("Ujian berhasil dibuat!"),W(!1),window.location.reload())}catch(e){if(console.error("Error creating exam:",e),null==(m=e.response)||null==(u=m.data)?void 0:u.errors){let a=Object.values(e.response.data.errors).flatMap(e=>Array.isArray(e)?e:[e]).join("\n");alert("Gagal membuat ujian:\n".concat(a))}else(null==(h=e.response)||null==(x=h.data)?void 0:x.message)?alert("Gagal membuat ujian: ".concat(e.response.data.message)):(null==(g=e.response)?void 0:g.status)===401?alert("Sesi login berakhir atau tidak valid. Silakan login kembali."):(null==(j=e.response)?void 0:j.status)===404?alert("Endpoint pembuatan ujian tidak ditemukan. Pastikan server backend berjalan."):alert("Gagal membuat ujian. Silakan coba lagi.")}finally{D(!1)}},[null==f?void 0:f.user_id,null==a?void 0:a.id]);return(0,s.jsxs)(s.Fragment,{children:[v&&(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen",children:[(0,s.jsx)(l.A,{user:a,student:t}),(0,s.jsxs)("div",{id:"ujian-main-data",className:"w-full p-4 flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"lg:flex-1 bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4 h-[200px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Ujian Belum Dikerjakan"}),(0,s.jsx)("p",{className:"text-black/60 text-sm",children:"Daftar ujian belum dikerjakan anda"})]}),V>1&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:ee,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",disabled:V<=1,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[y+1," / ",V]}),(0,s.jsx)("button",{onClick:$,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",disabled:V<=1,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]}),(0,s.jsx)("div",{className:"flex-1 flex items-center",children:V>0?(0,s.jsx)("div",{className:"w-full overflow-hidden",children:(0,s.jsx)("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*y,"%)")},children:Y.map((e,a)=>{var t;return(0,s.jsx)("div",{className:"w-full flex-shrink-0",children:(0,s.jsx)("div",{className:"border-t border-black/10 pt-4",children:(0,s.jsx)(m,{ujian:e})})},null!=(t=e.id)?t:a)})})}):(0,s.jsxs)("div",{className:"w-full flex flex-col items-center justify-center py-4 bg-gray-50 rounded-xl border border-dashed border-orange-200 h-[80px]",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-orange-400 mb-1",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),(0,s.jsx)("h3",{className:"text-sm font-semibold text-orange-600 mb-0.5",children:"Semua ujian sudah selesai!"}),(0,s.jsx)("p",{className:"text-black/60 text-xs",children:"Tidak ada ujian pending. Pertahankan prestasimu!"})]})})]}),(0,s.jsxs)("div",{className:"w-full lg:w-auto lg:min-w-[400px] grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,s.jsx)("div",{className:"bg-red-100 p-3 rounded-full mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-red-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,s.jsx)("h3",{className:"text-3xl font-bold text-red-600 mb-2",children:V}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ujian Belum Selesai"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Perlu dikerjakan"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,s.jsx)("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:Q.length}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ujian Sudah Selesai"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sudah dikumpulkan"})]})]})]}),(0,s.jsx)("section",{className:"w-full px-4 pb-4",children:(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),(0,s.jsx)("input",{type:"text",placeholder:"Cari berdasarkan mata pelajaran atau judul ujian...",value:k,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 focus:outline-none rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm"})]}),(0,s.jsx)("div",{className:"w-full sm:w-auto",children:(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"w-full sm:w-48 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"Semua Mata Pelajaran"}),G.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("div",{className:"w-full sm:w-auto",children:(0,s.jsxs)("select",{value:M,onChange:e=>L(e.target.value),className:"w-full sm:w-40 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"Semua Status"}),(0,s.jsx)("option",{value:"belum",children:"Belum Dikerjakan"}),(0,s.jsx)("option",{value:"selesai",children:"Sudah Selesai"})]})}),(""!==k||"all"!==C||"all"!==M)&&(0,s.jsxs)("button",{onClick:et,className:"w-full sm:w-auto px-4 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-colors duration-200 text-sm font-medium flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),"Reset"]})]})})}),(0,s.jsx)("section",{id:"list-ujian",className:"w-full grid grid-cols-1 gap-4 p-4",children:q.length>0?q.map(a=>{let[t,l]=a;return(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>ea(t),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:t}),(0,s.jsxs)("p",{className:"text-black/60 text-sm",children:[l.length," Ujian"]})]}),(0,s.jsx)("span",{className:"p-1 rounded hover:bg-gray-100 transition","aria-label":A[t]?"Tutup":"Buka",children:A[t]?(0,s.jsx)(x.A,{className:"w-5 h-5"}):(0,s.jsx)(h.A,{className:"w-5 h-5"})})]}),A[t]&&(0,s.jsx)("div",{className:"divide-y divide-black/10 transition-all duration-300",children:l.map(a=>{var t;return(0,s.jsxs)("div",{className:"flex items-start sm:items-center justify-between py-4 gap-2",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:a.title}),(0,s.jsxs)("p",{className:"text-black/60 text-sm",children:["Tanggal: ",a.date?new Date(a.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-",a.start_time&&a.end_time?" • ".concat(a.start_time," - ").concat(a.end_time):""]}),(0,s.jsxs)("p",{className:"text-black/60 text-xs",children:["Ruangan: ",(null==(t=a.room)?void 0:t.name)||"Belum ditentukan"]})]}),(0,s.jsx)("p",{className:"text-xs ".concat(a.isCompleted?"text-emerald-600":"text-orange-700"),children:a.isCompleted?"Selesai":"Belum dikerjakan"})]}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:a.isCompleted?(0,s.jsxs)("button",{onClick:()=>e.push("/edu/ujian/".concat(a.id,"?mode=hasil")),className:"text-sm bg-emerald-500 text-white px-3 py-2 rounded-sm flex items-center gap-1 hover:bg-emerald-400 hover:shadow transition",children:["Lihat Hasil",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})]}):(0,s.jsxs)("button",{onClick:()=>e.push("/edu/ujian/".concat(a.id)),className:"text-sm bg-orange-500 text-white px-3 py-2 rounded-sm flex items-center gap-1 hover:bg-orange-400 hover:shadow transition",children:["Kerjakan",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})})]})})]},a.id)})})]},t)}):(0,s.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Tidak ada ujian."})})]}),w&&(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen",children:[(0,s.jsx)(l.A,{user:a,teacher:f}),(0,s.jsxs)("div",{id:"ujian-main-data",className:"w-full p-4 flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"lg:flex-1 bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4 h-[200px]",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Buat Ujian Baru"}),(0,s.jsx)("p",{className:"text-black/60 text-sm",children:"Klik tombol di bawah untuk membuat ujian baru"})]})}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("button",{onClick:()=>W(!0),className:"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl transition-all duration-200 flex items-center gap-3 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Buat Ujian Baru"]})})]}),(0,s.jsxs)("div",{className:"w-full lg:w-auto lg:min-w-[400px] grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-full mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3-6h-7.5M21 7.5c0-1.05-.84-1.89-1.89-1.89H4.89C3.84 5.61 3 6.45 3 7.5v9c0 1.05.84 1.89 1.89 1.89h14.22c1.05 0 1.89-.84 1.89-1.89v-9Z"})})}),(0,s.jsx)("h3",{className:"text-3xl font-bold text-blue-600 mb-2",children:X.total}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Total Ujian"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Yang telah dijadwalkan"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,s.jsx)("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:X.ongoing}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ujian Sedang Berlangsung"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Periksa proktor dan peserta"})]})]})]}),(0,s.jsx)("section",{className:"w-full px-4 pb-4",children:(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),(0,s.jsx)("input",{type:"text",placeholder:"Cari berdasarkan mata pelajaran atau judul ujian...",value:k,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 focus:outline-none rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm"})]}),(0,s.jsx)("div",{className:"w-full sm:w-auto",children:(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"w-full sm:w-48 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"Semua Mata Pelajaran"}),G.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("div",{className:"w-full sm:w-auto",children:(0,s.jsxs)("select",{value:M,onChange:e=>L(e.target.value),className:"w-full sm:w-48 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,s.jsx)("option",{value:"all",children:"Semua Status"}),(0,s.jsx)("option",{value:"upcoming",children:"Belum Dimulai"}),(0,s.jsx)("option",{value:"ongoing",children:"Sedang Berlangsung"}),(0,s.jsx)("option",{value:"completed",children:"Sudah Selesai"})]})}),(""!==k||"all"!==C||"all"!==M)&&(0,s.jsxs)("button",{onClick:et,className:"w-full sm:w-auto px-4 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-colors duration-200 text-sm font-medium flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),"Reset"]})]})})}),(0,s.jsx)("section",{id:"list-ujian",className:"w-full grid grid-cols-1 gap-4 p-4",children:q.length>0?q.map(a=>{let[t,l]=a;return(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>ea(t),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:t}),(0,s.jsxs)("p",{className:"text-black/60 text-sm",children:[l.length," Ujian"]})]}),(0,s.jsx)("span",{className:"p-1 rounded hover:bg-gray-100 transition","aria-label":A[t]?"Tutup":"Buka",children:A[t]?(0,s.jsx)(x.A,{className:"w-5 h-5"}):(0,s.jsx)(h.A,{className:"w-5 h-5"})})]}),A[t]&&(0,s.jsx)("div",{className:"divide-y divide-black/10 transition-all duration-300",children:l.map(a=>{var t,l,r,n,i,d;return(0,s.jsxs)("div",{className:"flex flex-col gap-3 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs uppercase tracking-wide text-orange-500",children:[(0,s.jsx)("span",{children:null!=(n=null==(t=a.subject)?void 0:t.name)?n:"Mata Pelajaran"}),(0,s.jsx)("span",{className:"text-gray-300",children:"•"}),(0,s.jsx)("span",{children:null!=(i=null==(l=a.class)?void 0:l.name)?i:"Kelas"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[a.date?new Date(a.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"",a.start_time&&a.end_time?" • ".concat(a.start_time," - ").concat(a.end_time):""]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Ruangan: ",null!=(d=null==(r=a.room)?void 0:r.name)?d:"Belum ditentukan"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-medium ".concat((e=>{switch(e){case"completed":return"text-emerald-600";case"ongoing":return"text-sky-600";default:return"text-orange-600"}})(a.scheduleStatus)," bg-gray-50 px-3 py-1 rounded-full"),children:(e=>{switch(e){case"completed":return"Sudah selesai";case"ongoing":return"Sedang berlangsung";default:return"Belum dimulai"}})(a.scheduleStatus)}),(0,s.jsx)("button",{onClick:()=>e.push("/edu/ujian/".concat(a.id,"?mode=hasil")),className:"rounded-lg border border-emerald-200 px-3 py-2 text-xs font-medium text-emerald-600 hover:bg-emerald-50",children:"Cek Nilai & Jawaban"}),(0,s.jsx)("button",{onClick:()=>e.push("/edu/ujian/manage/".concat(a.id)),className:"rounded-lg border border-gray-200 px-3 py-2 text-xs font-medium text-gray-600 hover:bg-gray-50",children:"Kelola Ujian"})]})]})]},a.id)})})]},t)}):(0,s.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Tidak ada ujian yang cocok dengan filter."})})]}),!v&&!w&&(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-400 text-sm",children:"Data ujian akan muncul setelah akun memiliki peran siswa atau staf."}),(0,s.jsx)(i,{isOpen:w&&P,onClose:()=>W(!1),subjects:U,classes:R,rooms:I,onSubmit:es,isLoading:T})]})}},12108:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},20063:(e,a,t)=>{"use strict";var s=t(47260);t.o(s,"redirect")&&t.d(a,{redirect:function(){return s.redirect}}),t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},24033:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},60230:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,i:()=>r});var s=t(12115);let l=(0,s.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),r=()=>(0,s.useContext)(l),n=l},65229:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},80942:(e,a,t)=>{Promise.resolve().then(t.bind(t,6099))},88730:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(95155),l=t(9540);function r(e){let{student:a,user:t,teacher:r}=e,n=window.location.pathname,i=(null==a?void 0:a.class.name)||"Tidak ada kelas",d=(null==t?void 0:t.role)||"guest",o=(null==r?void 0:r.specialization)||"Tidak ada mapel";return(0,s.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,s.jsx)(l.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case n.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case n.startsWith("/edu/tugas"):return"Tugas Anda";case n.startsWith("/edu/ujian"):return"Ujian Anda";case n.startsWith("/edu/nilai"):return"Nilai Anda";case n.startsWith("/edu/jadwal"):return"Jadwal";case n.startsWith("/edu/setelan"):return"Setelan";case n.startsWith("/edu/perangkat"):return"Perangkat";case n.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,s.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==t?void 0:t.name)||"Loading...","."]})]})]}),(0,s.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==t?void 0:t.role)==="siswa"?i.replaceAll("-"," "):(null==t?void 0:t.role)==="guru"?o.replaceAll("-"," "):(null==t?void 0:t.role)==="admin"?"Administrator":"Tamu"})]})}t(12115)}},e=>{e.O(0,[5125,865,8441,1255,7358],()=>e(e.s=80942)),_N_E=e.O()}]);