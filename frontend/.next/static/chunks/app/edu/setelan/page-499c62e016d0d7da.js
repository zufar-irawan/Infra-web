(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8788],{8457:(e,a,t)=>{Promise.resolve().then(t.bind(t,41965))},9540:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},35299:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41965:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(95155),r=t(12115),n=t(88730),i=t(60230),l=t(66348),u=t(68407),o=t.n(u),d=t(35299);let c={mulai_masuk_siswa:"07:00",jam_masuk_siswa:"07:15",jam_pulang_siswa:"15:00",batas_pulang_siswa:"16:00"},m=()=>sessionStorage.getItem("token");function p(){let{user:e,student:a}=(0,i.i)(),[t,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(c),[g,x]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1),w=(null==e?void 0:e.role)==="admin",v=(0,r.useMemo)(()=>({mulai_masuk_siswa:"Mulai absen masuk siswa",jam_masuk_siswa:"Batas absen masuk siswa",jam_pulang_siswa:"Mulai absen pulang siswa",batas_pulang_siswa:"Batas absen pulang siswa"}),[]);(0,r.useEffect)(()=>{if(!w)return void x(!1);(async()=>{var e,a,t,s,r,n,i,d,p;let g=m();if(!g)return x(!1);try{let i=await l.A.get("/lms/settings",{headers:{Authorization:"Bearer ".concat(g)}}),o=Array.isArray(null==(e=i.data)?void 0:e.data)?i.data.data:[];if(o.length>0){let e=o[0];u(null!=(a=e.id)?a:null),h({mulai_masuk_siswa:null!=(t=e.mulai_masuk_siswa)?t:c.mulai_masuk_siswa,jam_masuk_siswa:null!=(s=e.jam_masuk_siswa)?s:c.jam_masuk_siswa,jam_pulang_siswa:null!=(r=e.jam_pulang_siswa)?r:c.jam_pulang_siswa,batas_pulang_siswa:null!=(n=e.batas_pulang_siswa)?n:c.batas_pulang_siswa})}}catch(e){console.error("Gagal mengambil setelan",e),o().fire({icon:"error",title:"Gagal",text:null!=(p=null==e||null==(d=e.response)||null==(i=d.data)?void 0:i.message)?p:"Tidak dapat mengambil data setelan."})}finally{x(!1)}})()},[w]);let j=async e=>{var a,s,r,n,i,d,c;e.preventDefault();let h=m();if(!h)return void o().fire({icon:"warning",title:"Token tidak ditemukan"});b(!0);try{let e={...p};if(t){let r=await l.A.put("/lms/settings/".concat(t),e,{headers:{Authorization:"Bearer ".concat(h)}}),n=null!=(s=null==(a=r.data)?void 0:a.data)?s:r.data;(null==n?void 0:n.id)&&u(n.id),o().fire({icon:"success",title:"Berhasil",text:"Setelan berhasil diperbarui."})}else{let a=await l.A.post("/lms/settings",e,{headers:{Authorization:"Bearer ".concat(h)}}),t=null!=(n=null==(r=a.data)?void 0:r.data)?n:a.data;(null==t?void 0:t.id)&&u(t.id),o().fire({icon:"success",title:"Berhasil",text:"Setelan berhasil dibuat."})}}catch(e){console.error("Gagal menyimpan setelan",e),o().fire({icon:"error",title:"Gagal",text:null!=(c=null==e||null==(d=e.response)||null==(i=d.data)?void 0:i.message)?c:"Terjadi kesalahan saat menyimpan setelan."})}finally{b(!1)}};return w?g?(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,s.jsx)(n.A,{user:e,student:a}),(0,s.jsx)("div",{className:"flex items-center justify-center p-10",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-xl border border-orange-100 bg-white px-4 py-3 text-sm text-orange-600 shadow",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Memuat setelan presensi..."]})})]}):(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,s.jsx)(n.A,{user:e,student:a}),(0,s.jsxs)("section",{className:"w-full p-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Pengaturan Presensi"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Sesuaikan jam operasional presensi siswa."})]}),(0,s.jsxs)("form",{onSubmit:j,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[Object.entries(v).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-4 shadow-md",children:[(0,s.jsx)("h2",{className:"text-base font-semibold mb-2",children:t}),(0,s.jsx)("input",{type:"time",value:p[a],onChange:e=>{var t;return t=e.target.value,void h(e=>({...e,[a]:t}))},className:"w-full rounded-md border border-gray-200 bg-gray-50 px-3 py-1.5 text-sm text-gray-700 focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-100",required:!0,disabled:g})]},a)}),(0,s.jsx)("div",{className:"md:col-span-2 flex justify-end gap-3",children:(0,s.jsx)("button",{type:"submit",disabled:g||f,className:"inline-flex items-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-60",children:f?"Menyimpan...":t?"Simpan Perubahan":"Buat Setelan"})})]})]})]}):(0,s.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,s.jsx)(n.A,{user:e,student:a}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-6 text-amber-700",children:"Hanya admin yang dapat mengakses halaman setelan."})})]})}},60230:(e,a,t)=>{"use strict";t.d(a,{A:()=>i,i:()=>n});var s=t(12115);let r=(0,s.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),n=()=>(0,s.useContext)(r),i=r},66348:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(95125),r=t(72378);let n=s.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let a=r.A.get("portal-auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let i=n},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var s=t(12115);let r=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:o="",children:d,iconNode:c,...m}=e;return(0,s.createElement)("svg",{ref:a,...i,width:r,height:r,stroke:t,strokeWidth:u?24*Number(l)/Number(r):l,className:n("lucide",o),...!d&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...c.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(d)?d:[d]])}),u=(e,a)=>{let t=(0,s.forwardRef)((t,i)=>{let{className:u,...o}=t;return(0,s.createElement)(l,{ref:i,iconNode:a,className:n("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),u),...o})});return t.displayName=r(e),t}},72378:(e,a,t)=>{"use strict";function s(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)e[s]=t[s]}return e}t.d(a,{A:()=>r});var r=function e(a,t){function r(e,r,n){if("undefined"!=typeof document){"number"==typeof(n=s({},t,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in n)n[l]&&(i+="; "+l,!0!==n[l]&&(i+="="+n[l].split(";")[0]));return document.cookie=e+"="+a.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},r=0;r<t.length;r++){var n=t[r].split("="),i=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(s[l]=a.read(i,l),e===l)break}catch(e){}}return e?s[e]:s}},remove:function(e,a){r(e,"",s({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,s({},this.attributes,a))},withConverter:function(a){return e(s({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},88730:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(95155),r=t(9540);function n(e){let{student:a,user:t,teacher:n}=e,i=window.location.pathname,l=(null==a?void 0:a.class.name)||"Tidak ada kelas",u=(null==t?void 0:t.role)||"guest",o=(null==n?void 0:n.specialization)||"Tidak ada mapel";return(0,s.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,s.jsx)(r.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case i.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===u?"Admin":"guru"===u?"Guru":"Siswa");case i.startsWith("/edu/tugas"):return"Tugas Anda";case i.startsWith("/edu/ujian"):return"Ujian Anda";case i.startsWith("/edu/nilai"):return"Nilai Anda";case i.startsWith("/edu/jadwal"):return"Jadwal";case i.startsWith("/edu/setelan"):return"Setelan";case i.startsWith("/edu/perangkat"):return"Perangkat";case i.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,s.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==t?void 0:t.name)||"Loading...","."]})]})]}),(0,s.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==t?void 0:t.role)==="siswa"?l.replaceAll("-"," "):(null==t?void 0:t.role)==="guru"?o.replaceAll("-"," "):(null==t?void 0:t.role)==="admin"?"Administrator":"Tamu"})]})}t(12115)}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=8457)),_N_E=e.O()}]);