(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783],{218:(e,t,a)=>{Promise.resolve().then(a.bind(a,28616))},9540:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},28616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(95155),s=a(12115),n=a(88730),l=a(60230),i=a(66348),d=a(68407),o=a.n(d),c=a(35299),u=a(71360);let m=()=>sessionStorage.getItem("token");function h(){let{user:e,student:t}=(0,l.i)(),[a,d]=(0,s.useState)([]),[h,x]=(0,s.useState)(!0),[p,g]=(0,s.useState)(""),[f,v]=(0,s.useState)(null),y=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="guru";(0,s.useEffect)(()=>{if(!y)return void x(!1);(async()=>{var e,t,a,r,s;let n=m();if(!n)return x(!1);try{let a=await i.A.get("/lms/rfid",{headers:{Authorization:"Bearer ".concat(n)}}),r=Array.isArray(null==(e=a.data)?void 0:e.data)?null==(t=a.data)?void 0:t.data:[];d(r)}catch(e){console.error("Gagal mengambil data RFID",e),o().fire({icon:"error",title:"Gagal",text:null!=(s=null==e||null==(r=e.response)||null==(a=r.data)?void 0:a.message)?s:"Tidak dapat memuat data RFID."})}finally{x(!1)}})()},[y]);let b=(0,s.useMemo)(()=>{if(!p.trim())return a;let e=p.toLowerCase();return a.filter(t=>{var a,r;return(null!=(a=t.code)?a:"").toLowerCase().includes(e)||(null!=(r=t.status)?r:"").toLowerCase().includes(e)})},[a,p]),j=async e=>{let t=m();if(!t)return void o().fire({icon:"warning",title:"Token tidak ditemukan"});if((await o().fire({icon:"warning",title:"Hapus kartu RFID?",text:"Data yang dihapus tidak dapat dikembalikan.",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal"})).isConfirmed){v(e);try{await i.A.delete("/lms/rfid/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),d(t=>t.filter(t=>t.id!==e)),o().fire({icon:"success",title:"Berhasil",text:"RFID berhasil dihapus."})}catch(e){var a,r,s;console.error("Gagal menghapus RFID",e),o().fire({icon:"error",title:"Gagal",text:null!=(s=null==e||null==(r=e.response)||null==(a=r.data)?void 0:a.message)?s:"Tidak dapat menghapus data RFID."})}finally{v(null)}}};return y?(0,r.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{user:e,student:t}),(0,r.jsxs)("section",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Manajemen RFID"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Pantau dan kelola kartu RFID yang terdaftar."})]}),(0,r.jsxs)("div",{className:"relative w-full sm:w-80",children:[(0,r.jsx)("input",{type:"text",placeholder:"Cari kode atau status RFID...",className:"w-full px-4 py-2 rounded-md border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-orange-500",value:p,onChange:e=>g(e.target.value)}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"pointer-events-none absolute right-3 top-2.5 h-5 w-5 text-gray-400",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 3a7.5 7.5 0 006.15 13.65z"})})]})]}),(0,r.jsx)("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-md",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-orange-400 text-sm font-semibold uppercase tracking-wide text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left",children:"No"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left",children:"Kode RFID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left",children:"Terdaftar"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right",children:"Aksi"})]})}),(0,r.jsx)("tbody",{children:h?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-500",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-xl border border-orange-100 bg-orange-50 px-4 py-2 text-sm text-orange-600",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 animate-spin"})," Memuat data RFID..."]})})}):b.length>0?b.map((e,t)=>{var a;return(0,r.jsxs)("tr",{className:"border-t hover:bg-orange-50/50 transition",children:[(0,r.jsx)("td",{className:"px-6 py-3 font-medium text-gray-700",children:t+1}),(0,r.jsx)("td",{className:"px-6 py-3 font-mono text-sm text-gray-800",children:e.code}),(0,r.jsx)("td",{className:"px-6 py-3",children:(0,r.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat("active"===e.status?"bg-emerald-100 text-emerald-700":"inactive"===e.status?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-600"),children:null!=(a=e.status)?a:"-"})}),(0,r.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleString("id-ID"):"-"}),(0,r.jsx)("td",{className:"px-6 py-3 text-right",children:(0,r.jsxs)("button",{onClick:()=>j(e.id),disabled:f===e.id,className:"inline-flex items-center gap-1 rounded-lg border border-rose-200 px-3 py-1.5 text-xs font-semibold text-rose-600 hover:bg-rose-50 disabled:opacity-60",children:[f===e.id?(0,r.jsx)(c.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,r.jsx)(u.A,{className:"h-3.5 w-3.5"}),"Hapus"]})})]},e.id)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-sm font-medium text-gray-500",children:p?"Tidak ada RFID yang cocok dengan pencarian.":"Belum ada data RFID yang tersedia."})})})]})})})]})]}):(0,r.jsxs)("div",{className:"overflow-y-auto min-h-screen bg-gray-50",children:[(0,r.jsx)(n.A,{user:e,student:t}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-6 text-amber-700",children:"Halaman ini hanya tersedia untuk admin atau guru."})})]})}},35299:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},60230:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,i:()=>n});var r=a(12115);let s=(0,r.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),n=()=>(0,r.useContext)(s),l=s},66348:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(95125),s=a(72378);let n=r.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=s.A.get("portal-auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l=n},71360:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:d?24*Number(i)/Number(s):i,className:n("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:d,...o}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return a.displayName=s(e),a}},72378:(e,t,a)=>{"use strict";function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}a.d(t,{A:()=>s});var s=function e(t,a){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=r({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var i in n)n[i]&&(l+="; "+i,!0!==n[i]&&(l+="="+n[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+l}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},s=0;s<a.length;s++){var n=a[s].split("="),l=n.slice(1).join("=");try{var i=decodeURIComponent(n[0]);if(r[i]=t.read(l,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){s(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},88730:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),s=a(9540);function n(e){let{student:t,user:a,teacher:n}=e,l=window.location.pathname,i=(null==t?void 0:t.class.name)||"Tidak ada kelas",d=(null==a?void 0:a.role)||"guest",o=(null==n?void 0:n.specialization)||"Tidak ada mapel";return(0,r.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,r.jsx)(s.A,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case l.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case l.startsWith("/edu/tugas"):return"Tugas Anda";case l.startsWith("/edu/ujian"):return"Ujian Anda";case l.startsWith("/edu/nilai"):return"Nilai Anda";case l.startsWith("/edu/jadwal"):return"Jadwal";case l.startsWith("/edu/setelan"):return"Setelan";case l.startsWith("/edu/perangkat"):return"Perangkat";case l.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,r.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==a?void 0:a.name)||"Loading...","."]})]})]}),(0,r.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==a?void 0:a.role)==="siswa"?i.replaceAll("-"," "):(null==a?void 0:a.role)==="guru"?o.replaceAll("-"," "):(null==a?void 0:a.role)==="admin"?"Administrator":"Tamu"})]})}a(12115)}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=218)),_N_E=e.O()}]);