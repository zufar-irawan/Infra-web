(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1827],{6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9540:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},18514:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},30498:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>N});var s=t(95155),r=t(88730),l=t(60230),n=t(66348),i=t(68407),d=t.n(i),o=t(35299),u=t(91169),c=t(89442),m=t(86651),x=t(89559),g=t(6191),h=t(18514),p=t(71360),f=t(12115);let b={aktif:"bg-emerald-100 text-emerald-700",nonaktif:"bg-gray-100 text-gray-600"},v=[{value:"aktif",label:"Aktif"},{value:"nonaktif",label:"Nonaktif"}],y=[{value:"new",label:"Buat akun baru"},{value:"existing",label:"Gunakan akun yang ada"}],j={accountMode:"new",user_id:"",user_name:"",user_email:"",user_password:"",user_phone:"",user_status:"aktif",nis:"",class_id:"",guardian_name:"",guardian_contact:"",enrollment_date:"",rfid_id:"",status:"aktif"},k=()=>sessionStorage.getItem("token");function N(){let{user:e,student:a,teacher:t,classes:i,students:N}=(0,l.i)(),[w,_]=(0,f.useState)(null!=N?N:[]),[A,C]=(0,f.useState)(!0),[M,S]=(0,f.useState)(""),[I,D]=(0,f.useState)("all"),[L,B]=(0,f.useState)("all"),[T,E]=(0,f.useState)(!1),[z,U]=(0,f.useState)("create"),[W,R]=(0,f.useState)(j),[O,q]=(0,f.useState)(null),[P,G]=(0,f.useState)(!1),F=(null==e?void 0:e.role)==="admin"||(null==e?void 0:e.role)==="guru",H=(null==e?void 0:e.role)==="admin",K=(null==e?void 0:e.role)==="admin",V=(0,f.useMemo)(()=>null!=i?i:[],[i]),Z=(0,f.useMemo)(()=>{var e,a,s;return t&&null!=(s=null!=(a=t.class_id)?a:null==(e=t.class)?void 0:e.id)?s:null},[t]);(0,f.useEffect)(()=>{N&&N.length&&(_(N),C(!1))},[N]),(0,f.useEffect)(()=>{(null==e?void 0:e.role)==="guru"&&Z&&D(String(Z))},[null==e?void 0:e.role,Z]);let $=(0,f.useCallback)(async()=>{var a,t,s,r,l;let i=k();if(!i||!e)return void C(!1);C(!0);try{let e=await n.A.get("/lms/students",{headers:{Authorization:"Bearer ".concat(i)}}),s=Array.isArray(e.data)?e.data:null!=(t=null==(a=e.data)?void 0:a.data)?t:[];_(s)}catch(e){console.error("Gagal mengambil data siswa",e),d().fire({icon:"error",title:"Gagal",text:null!=(l=null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.message)?l:"Tidak dapat mengambil data siswa."})}finally{C(!1)}},[e]);(0,f.useEffect)(()=>{e&&$()},[e,$]);let J=(0,f.useMemo)(()=>{let a=[...w];if((null==e?void 0:e.role)==="guru"&&Z&&(a=a.filter(e=>{var a,t,s;return Number(null!=(s=null!=(t=e.class_id)?t:null==(a=e.class)?void 0:a.id)?s:null)===Number(Z)})),"all"!==I&&(a=a.filter(e=>{var a,t,s;return Number(null!=(s=null!=(t=e.class_id)?t:null==(a=e.class)?void 0:a.id)?s:null)===Number(I)})),"all"!==L&&(a=a.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")===L})),M.trim()){let e=M.toLowerCase();a=a.filter(a=>{var t,s,r,l,n,i,d,o,u;let c=null!=(i=null!=(n=null==(t=a.user)?void 0:t.name)?n:null==(s=a.user)?void 0:s.username)?i:"",m=null!=(d=null==(r=a.user)?void 0:r.email)?d:"",x=null!=(o=null==(l=a.class)?void 0:l.name)?o:"";return c.toLowerCase().includes(e)||(null!=(u=a.nis)?u:"").toLowerCase().includes(e)||m.toLowerCase().includes(e)||x.toLowerCase().includes(e)})}return a},[w,null==e?void 0:e.role,Z,I,L,M]),Q=(0,f.useMemo)(()=>{let e=w.length;return{total:e,aktif:w.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")==="aktif"}).length,nonaktif:w.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")!=="aktif"}).length}},[w]),X=()=>{E(!1),q(null),R(j)},Y=(e,a)=>{R(t=>"accountMode"===e?{...t,accountMode:a,user_id:"",user_name:"",user_email:"",user_password:"",user_phone:"",user_status:"aktif"}:{...t,[e]:a})},ee=async e=>{e.preventDefault();let a=k();if(!a)return void d().fire({icon:"warning",title:"Tidak ada token"});if("create"===z){if(!W.nis||!W.enrollment_date)return void d().fire({icon:"warning",title:"Form belum lengkap",text:"NIS dan tanggal masuk wajib diisi."});if("existing"===W.accountMode){if(!W.user_id)return void d().fire({icon:"warning",title:"User belum dipilih",text:"Isi User ID atau pilih opsi buat akun baru."})}else if(!W.user_name||!W.user_email||!W.user_password)return void d().fire({icon:"warning",title:"Data akun belum lengkap",text:"Nama, email, dan password wajib diisi untuk membuat akun baru."})}let t=(()=>{let e={nis:W.nis||null,class_id:W.class_id?Number(W.class_id):null,guardian_name:W.guardian_name||null,guardian_contact:W.guardian_contact||null,enrollment_date:W.enrollment_date||null,rfid_id:W.rfid_id?Number(W.rfid_id):null,status:W.status};return"create"===z&&("existing"===W.accountMode?e.user_id=W.user_id?Number(W.user_id):null:(e.user_name=W.user_name,e.user_email=W.user_email,e.user_password=W.user_password,W.user_phone&&(e.user_phone=W.user_phone),W.user_status&&(e.user_status=W.user_status))),e})();G(!0);try{"create"===z?(await n.A.post("/lms/students",t,{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Data siswa berhasil ditambahkan."})):O&&(await n.A.put("/lms/students/".concat(O.id),t,{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Data siswa berhasil diperbarui."})),X(),$()}catch(e){var s,r,l;console.error("Gagal menyimpan siswa",e),d().fire({icon:"error",title:"Gagal",text:null!=(l=null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.message)?l:"Terjadi kesalahan saat menyimpan data siswa."})}finally{G(!1)}},ea=async e=>{var a,t,s,r,l;if(!K||!(await d().fire({icon:"warning",title:"Hapus siswa?",text:"Data siswa ".concat(null!=(t=null==(a=e.user)?void 0:a.name)?t:""," akan dihapus permanen."),showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal"})).isConfirmed)return;let i=k();if(i)try{await n.A.delete("/lms/students/".concat(e.id),{headers:{Authorization:"Bearer ".concat(i)}}),d().fire({icon:"success",title:"Berhasil",text:"Data siswa dihapus."}),$()}catch(e){console.error("Gagal menghapus siswa",e),d().fire({icon:"error",title:"Gagal",text:null!=(l=null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.message)?l:"Tidak dapat menghapus data siswa."})}};return(0,s.jsxs)("div",{className:"min-h-screen overflow-y-auto bg-gray-50",children:[(0,s.jsx)(r.A,{user:e,student:a,teacher:t}),(0,s.jsxs)("section",{className:"space-y-6 px-4 pb-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.A,{className:"h-10 w-10 rounded-full bg-orange-100 p-2 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Total Siswa"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:Q.total})]})]})}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.A,{className:"h-10 w-10 rounded-full bg-emerald-100 p-2 text-emerald-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Aktif"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-emerald-600",children:Q.aktif})]})]})}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.A,{className:"h-10 w-10 rounded-full bg-gray-100 p-2 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Nonaktif"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-gray-600",children:Q.nonaktif})]})]})})]}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,s.jsxs)("div",{className:"grid w-full grid-cols-1 gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Cari"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:M,onChange:e=>S(e.target.value),placeholder:"Nama, NIS, email, kelas",className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200"}),(0,s.jsx)(m.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Kelas"}),(0,s.jsxs)("select",{value:I,onChange:e=>D(e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",disabled:(null==e?void 0:e.role)==="guru"&&!!Z,children:[(0,s.jsx)("option",{value:"all",children:"Semua kelas"}),null==V?void 0:V.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Status"}),(0,s.jsxs)("select",{value:L,onChange:e=>B(e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"all",children:"Semua"}),v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsx)("div",{className:"flex items-center gap-3 self-end",children:(0,s.jsxs)("button",{onClick:()=>{S(""),B("all"),D((null==e?void 0:e.role)==="guru"&&Z?String(Z):"all"),$()},className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"})," Reset"]})})]}),H&&(0,s.jsxs)("button",{onClick:()=>{U("create"),q(null),R({...j,accountMode:"new",class_id:(null==e?void 0:e.role)==="guru"&&Z?String(Z):"",enrollment_date:new Date().toISOString().slice(0,10)}),E(!0)},className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"})," Tambah Siswa"]})]})}),(0,s.jsx)("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-100 text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-xs font-semibold uppercase text-gray-500",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Nama"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"NIS"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Kelas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Wali"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"RFID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left",children:"Status"}),F&&(0,s.jsx)("th",{className:"px-6 py-3 text-right",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:A?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:F?8:7,className:"px-6 py-10 text-center text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(o.A,{className:"h-5 w-5 animate-spin text-orange-500"}),"Memuat data siswa..."]})})}):0===J.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:F?8:7,className:"px-6 py-12 text-center text-sm font-medium text-gray-500",children:"Tidak ada data siswa yang cocok dengan filter."})}):J.map(e=>{var a,t,r,l,n,i,d,o,u,c,m,x,g,f,y,j;let k=null!=(d=null==(a=e.class)?void 0:a.name)?d:"-",N=e.guardian_name?"".concat(e.guardian_name).concat(e.guardian_contact?" â€¢ ".concat(e.guardian_contact):""):"-";return(0,s.jsxs)("tr",{className:"hover:bg-orange-50/50",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-800",children:null!=(u=null!=(o=null==(t=e.user)?void 0:t.name)?o:null==(r=e.user)?void 0:r.username)?u:"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:null!=(c=e.nis)?c:"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:k}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:null!=(m=null==(l=e.user)?void 0:l.email)?m:"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:N}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:null!=(g=null!=(x=null==(n=e.rfid)?void 0:n.id)?x:e.rfid_id)?g:"-"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat(null!=(y=b[null!=(f=e.status)?f:"aktif"])?y:b.aktif),children:null!=(j=null==(i=v.find(a=>{var t;return a.value===(null!=(t=e.status)?t:"aktif")}))?void 0:i.label)?j:e.status})}),F&&(0,s.jsx)("td",{className:"px-6 py-4 text-right text-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{var a,t,s,r,l,n,i,d,o,u,c,m,x,g;U("edit"),q(e),R({accountMode:"existing",user_id:String(null!=(n=e.user_id)?n:""),user_name:null!=(i=null==(a=e.user)?void 0:a.name)?i:"",user_email:null!=(d=null==(t=e.user)?void 0:t.email)?d:"",user_password:"",user_phone:null!=(o=null==(s=e.user)?void 0:s.phone)?o:"",user_status:null!=(u=null==(r=e.user)?void 0:r.status)?u:"aktif",nis:null!=(c=e.nis)?c:"",class_id:e.class_id?String(e.class_id):(null==(l=e.class)?void 0:l.id)?String(e.class.id):"",guardian_name:null!=(m=e.guardian_name)?m:"",guardian_contact:null!=(x=e.guardian_contact)?x:"",enrollment_date:e.enrollment_date?e.enrollment_date.slice(0,10):"",rfid_id:e.rfid_id?String(e.rfid_id):"",status:null!=(g=e.status)?g:"aktif"}),E(!0)},className:"inline-flex items-center gap-1 rounded-lg border border-emerald-200 px-3 py-1.5 text-xs font-medium text-emerald-600 hover:bg-emerald-50",children:[(0,s.jsx)(h.A,{className:"h-3.5 w-3.5"})," Edit"]}),K&&(0,s.jsxs)("button",{onClick:()=>ea(e),className:"inline-flex items-center gap-1 rounded-lg border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50",children:[(0,s.jsx)(p.A,{className:"h-3.5 w-3.5"})," Hapus"]})]})})]},e.id)})})]})})})]}),T?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl rounded-2xl bg-white shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"create"===z?"Tambah Siswa":"Edit Data Siswa"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"create"===z?"Lengkapi form untuk menambahkan siswa baru ke LMS.":"Perbarui informasi siswa sesuai kebutuhan."})]}),(0,s.jsx)("button",{onClick:X,className:"rounded-full p-2 text-gray-500 hover:bg-gray-100","aria-label":"Tutup",children:(0,s.jsx)("span",{className:"text-xl leading-none",children:"\xd7"})})]}),(0,s.jsxs)("form",{onSubmit:ee,className:"grid gap-5 px-6 py-6",children:["create"===z&&(0,s.jsxs)("div",{className:"space-y-4 rounded-2xl border border-gray-100 bg-gray-50/40 p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Pengaturan Akun LMS"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Pilih apakah ingin menggunakan akun yang sudah ada atau membuat akun baru sekaligus."})]}),(0,s.jsx)("div",{className:"flex gap-2",children:y.map(e=>{let a=W.accountMode===e.value;return(0,s.jsx)("button",{type:"button",onClick:()=>Y("accountMode",e.value),className:"rounded-xl border px-3 py-2 text-sm font-semibold transition ".concat(a?"border-orange-500 bg-white text-orange-600 shadow-sm":"border-transparent bg-transparent text-gray-500 hover:border-orange-200 hover:text-orange-500"),children:e.label},e.value)})})]}),"existing"===W.accountMode?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:(0,s.jsxs)("div",{className:"sm:col-span-1",children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"User ID (akun siswa)"}),(0,s.jsx)("input",{type:"number",value:W.user_id,onChange:e=>Y("user_id",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Masukkan ID user yang sudah ada",required:"existing"===W.accountMode}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"Pastikan user sudah memiliki peran siswa sebelum ditautkan."})]})}):(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Nama Lengkap"}),(0,s.jsx)("input",{type:"text",value:W.user_name,onChange:e=>Y("user_name",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Nama sesuai akun",required:"new"===W.accountMode})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Email"}),(0,s.jsx)("input",{type:"email",value:W.user_email,onChange:e=>Y("user_email",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"contoh@email.com",required:"new"===W.accountMode})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Password Awal"}),(0,s.jsx)("input",{type:"password",value:W.user_password,onChange:e=>Y("user_password",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Minimal 6 karakter",required:"new"===W.accountMode})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Nomor Telepon (opsional)"}),(0,s.jsx)("input",{type:"text",value:W.user_phone,onChange:e=>Y("user_phone",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"08xxxxxxxxxx"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Status Akun"}),(0,s.jsx)("select",{value:W.user_status,onChange:e=>Y("user_status",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"NIS"}),(0,s.jsx)("input",{type:"text",value:W.nis,onChange:e=>Y("nis",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Nomor Induk Siswa",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Kelas"}),(0,s.jsxs)("select",{value:W.class_id,onChange:e=>Y("class_id",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"",children:"Pilih kelas"}),null==V?void 0:V.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Tanggal Masuk"}),(0,s.jsx)("input",{type:"date",value:W.enrollment_date,onChange:e=>Y("enrollment_date",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",required:"create"===z})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Nama Wali"}),(0,s.jsx)("input",{type:"text",value:W.guardian_name,onChange:e=>Y("guardian_name",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Opsional"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Kontak Wali"}),(0,s.jsx)("input",{type:"text",value:W.guardian_contact,onChange:e=>Y("guardian_contact",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Opsional"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"RFID ID"}),(0,s.jsx)("input",{type:"number",value:W.rfid_id,onChange:e=>Y("rfid_id",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Opsional"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Status"}),(0,s.jsx)("select",{value:W.status,onChange:e=>Y("status",e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:v.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 border-t border-gray-100 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:X,className:"rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Batal"}),(0,s.jsxs)("button",{type:"submit",disabled:P,className:"inline-flex items-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-70",children:[P&&(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),"create"===z?"Simpan":"Perbarui"]})]})]})]})}):null]})}},35299:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41262:(e,a,t)=>{Promise.resolve().then(t.bind(t,30498))},60230:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,i:()=>l});var s=t(12115);let r=(0,s.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),l=()=>(0,s.useContext)(r),n=r},66348:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(95125),r=t(72378);let l=s.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let a=r.A.get("portal-auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let n=l},71360:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(12115);let r=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:u,iconNode:c,...m}=e;return(0,s.createElement)("svg",{ref:a,...n,width:r,height:r,stroke:t,strokeWidth:d?24*Number(i)/Number(r):i,className:l("lucide",o),...!u&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...c.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(u)?u:[u]])}),d=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:d,...o}=t;return(0,s.createElement)(i,{ref:n,iconNode:a,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return t.displayName=r(e),t}},72378:(e,a,t)=>{"use strict";function s(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)e[s]=t[s]}return e}t.d(a,{A:()=>r});var r=function e(a,t){function r(e,r,l){if("undefined"!=typeof document){"number"==typeof(l=s({},t,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in l)l[i]&&(n+="; "+i,!0!==l[i]&&(n+="="+l[i].split(";")[0]));return document.cookie=e+"="+a.write(r,e)+n}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},r=0;r<t.length;r++){var l=t[r].split("="),n=l.slice(1).join("=");try{var i=decodeURIComponent(l[0]);if(s[i]=a.read(n,i),e===i)break}catch(e){}}return e?s[e]:s}},remove:function(e,a){r(e,"",s({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,s({},this.attributes,a))},withConverter:function(a){return e(s({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},86651:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},88730:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(95155),r=t(9540);function l(e){let{student:a,user:t,teacher:l}=e,n=window.location.pathname,i=(null==a?void 0:a.class.name)||"Tidak ada kelas",d=(null==t?void 0:t.role)||"guest",o=(null==l?void 0:l.specialization)||"Tidak ada mapel";return(0,s.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,s.jsx)(r.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case n.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case n.startsWith("/edu/tugas"):return"Tugas Anda";case n.startsWith("/edu/ujian"):return"Ujian Anda";case n.startsWith("/edu/nilai"):return"Nilai Anda";case n.startsWith("/edu/jadwal"):return"Jadwal";case n.startsWith("/edu/setelan"):return"Setelan";case n.startsWith("/edu/perangkat"):return"Perangkat";case n.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,s.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==t?void 0:t.name)||"Loading...","."]})]})]}),(0,s.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==t?void 0:t.role)==="siswa"?i.replaceAll("-"," "):(null==t?void 0:t.role)==="guru"?o.replaceAll("-"," "):(null==t?void 0:t.role)==="admin"?"Administrator":"Tamu"})]})}t(12115)},89442:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},89559:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},91169:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=41262)),_N_E=e.O()}]);