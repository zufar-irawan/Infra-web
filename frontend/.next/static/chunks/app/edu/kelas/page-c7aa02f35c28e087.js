(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7706],{6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9540:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},18514:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},35299:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},47937:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},60230:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,i:()=>l});var s=t(12115);let r=(0,s.createContext)({user:null,student:null,teacher:null,students:null,teachers:null,tugas:null,subjects:null,exams:null,nilai:null,schedules:null,rooms:null,classes:null}),l=()=>(0,s.useContext)(r),n=r},66348:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(95125),r=t(72378);let l=s.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let a=r.A.get("portal-auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let n=l},71360:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(12115);let r=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:a,...n,width:r,height:r,stroke:t,strokeWidth:d?24*Number(i)/Number(r):i,className:l("lucide",o),...!c&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(c)?c:[c]])}),d=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:d,...o}=t;return(0,s.createElement)(i,{ref:n,iconNode:a,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return t.displayName=r(e),t}},72378:(e,a,t)=>{"use strict";function s(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var s in t)e[s]=t[s]}return e}t.d(a,{A:()=>r});var r=function e(a,t){function r(e,r,l){if("undefined"!=typeof document){"number"==typeof(l=s({},t,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in l)l[i]&&(n+="; "+i,!0!==l[i]&&(n+="="+l[i].split(";")[0]));return document.cookie=e+"="+a.write(r,e)+n}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},r=0;r<t.length;r++){var l=t[r].split("="),n=l.slice(1).join("=");try{var i=decodeURIComponent(l[0]);if(s[i]=a.read(n,i),e===i)break}catch(e){}}return e?s[e]:s}},remove:function(e,a){r(e,"",s({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,s({},this.attributes,a))},withConverter:function(a){return e(s({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},86651:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},88730:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(95155),r=t(9540);function l(e){let{student:a,user:t,teacher:l}=e,n=window.location.pathname,i=(null==a?void 0:a.class.name)||"Tidak ada kelas",d=(null==t?void 0:t.role)||"guest",o=(null==l?void 0:l.specialization)||"Tidak ada mapel";return(0,s.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,s.jsx)(r.A,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case n.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case n.startsWith("/edu/tugas"):return"Tugas Anda";case n.startsWith("/edu/ujian"):return"Ujian Anda";case n.startsWith("/edu/nilai"):return"Nilai Anda";case n.startsWith("/edu/jadwal"):return"Jadwal";case n.startsWith("/edu/setelan"):return"Setelan";case n.startsWith("/edu/perangkat"):return"Perangkat";case n.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,s.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==t?void 0:t.name)||"Loading...","."]})]})]}),(0,s.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==t?void 0:t.role)==="siswa"?i.replaceAll("-"," "):(null==t?void 0:t.role)==="guru"?o.replaceAll("-"," "):(null==t?void 0:t.role)==="admin"?"Administrator":"Tamu"})]})}t(12115)},89442:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},89863:(e,a,t)=>{Promise.resolve().then(t.bind(t,94773))},91169:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},94773:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>M});var s=t(95155),r=t(88730),l=t(60230),n=t(66348),i=t(68407),d=t.n(i),o=t(35299),c=t(91169),u=t(71847);let m=(0,u.A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),x=(0,u.A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var h=t(89442),g=t(47937);let p=(0,u.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=t(86651),b=t(6191);let y=(0,u.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var j=t(18514),v=t(71360),k=t(12115);let w=[{value:"aktif",label:"Aktif"},{value:"nonaktif",label:"Nonaktif"}],N={aktif:"bg-emerald-100 text-emerald-700",nonaktif:"bg-gray-100 text-gray-600"},A={name:"",description:"",status:"aktif"},C={teacher_id:"",subject_id:""},B={student_id:""},S=()=>sessionStorage.getItem("token");function M(){var e,a,t;let{user:i,student:u,teacher:M,classes:T,teachers:_,students:G,subjects:z}=(0,l.i)(),[K,P]=(0,k.useState)(Array.isArray(T)?T:[]),[E,H]=(0,k.useState)(!0),[L,R]=(0,k.useState)(""),[U,W]=(0,k.useState)("all"),[D,I]=(0,k.useState)(!1),[F,O]=(0,k.useState)("create"),[q,V]=(0,k.useState)(A),[Z,$]=(0,k.useState)(null),[J,X]=(0,k.useState)(!1),[Q,Y]=(0,k.useState)(!1),[ee,ea]=(0,k.useState)(null),[et,es]=(0,k.useState)(!1),[er,el]=(0,k.useState)(C),[en,ei]=(0,k.useState)(B),[ed,eo]=(0,k.useState)(!1),[ec,eu]=(0,k.useState)(!1),em=(null==i?void 0:i.role)==="admin";(0,k.useEffect)(()=>{Array.isArray(T)&&T.length&&(P(T),H(!1))},[T]);let ex=(0,k.useCallback)(async()=>{var e,a,t,s,r;let l=S();if(!l)return void H(!1);H(!0);try{let t=await n.A.get("/lms/classes",{headers:{Authorization:"Bearer ".concat(l)},params:{per_page:100}}),s=Array.isArray(t.data)?t.data:null!=(a=null==(e=t.data)?void 0:e.data)?a:[];P(s)}catch(e){console.error("Gagal mengambil data kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Tidak dapat mengambil data kelas."})}finally{H(!1)}},[]);(0,k.useEffect)(()=>{i&&ex()},[i,ex]);let eh=(0,k.useMemo)(()=>{let e=[...K];if("all"!==U&&(e=e.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")===U})),L.trim()){let a=L.toLowerCase();e=e.filter(e=>[e.name,e.description].filter(Boolean).some(e=>String(e).toLowerCase().includes(a)))}return e},[K,U,L]),eg=(0,k.useMemo)(()=>{let e=K.length;return{total:e,aktif:K.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")==="aktif"}).length,nonaktif:K.filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")!=="aktif"}).length}},[K]),ep=()=>{I(!1),$(null),V(A)},ef=async e=>{e.preventDefault();let a=S();if(!a)return void d().fire({icon:"warning",title:"Tidak ada token"});X(!0);try{"create"===F?(await n.A.post("/lms/classes",{name:q.name,description:q.description||null,status:q.status},{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Kelas berhasil dibuat."})):Z&&(await n.A.put("/lms/classes/".concat(Z.id),{name:q.name,description:q.description||null,status:q.status},{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Kelas berhasil diperbarui."})),ep(),ex()}catch(e){var t,s,r;console.error("Gagal menyimpan kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Terjadi kesalahan saat menyimpan data kelas."})}finally{X(!1)}},eb=async e=>{if(!em||!(await d().fire({icon:"warning",title:"Hapus kelas?",text:"Kelas ".concat(e.name," akan dihapus permanen."),showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444"})).isConfirmed)return;let a=S();if(a)try{await n.A.delete("/lms/classes/".concat(e.id),{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Kelas dihapus."}),ex()}catch(e){var t,s,r;console.error("Gagal menghapus kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Tidak dapat menghapus data kelas."})}},ey=(0,k.useCallback)(async e=>{let a=S();if(a){es(!0);try{let t=await n.A.get("/lms/classes/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}});ea(t.data)}catch(e){var t,s,r;console.error("Gagal mengambil detail kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Tidak dapat memuat detail kelas."})}finally{es(!1)}}},[]),ej=()=>{Y(!1),ea(null),el(C),ei(B)},ev=(0,k.useMemo)(()=>{var e;if(!ee)return[];let a=null!=(e=null==ee?void 0:ee.class_teachers)?e:[];return Array.isArray(a)?a:[]},[ee]),ek=(0,k.useMemo)(()=>{var e;if(!ee)return[];let a=null!=(e=null==ee?void 0:ee.class_students)?e:[];return Array.isArray(a)?a:[]},[ee]),ew=(0,k.useMemo)(()=>new Set(ek.map(e=>e.student_id)),[ek]),eN=(0,k.useMemo)(()=>(Array.isArray(G)?G:[]).filter(e=>!ew.has(e.id)),[G,ew]),eA=(0,k.useMemo)(()=>Array.isArray(z)?z:[],[z]),eC=(0,k.useMemo)(()=>(Array.isArray(_)?_:[]).filter(e=>{var a;return(null!=(a=e.status)?a:"aktif")==="aktif"}),[_]),eB=async e=>{if(e.preventDefault(),!ee)return;let a=S();if(a){if(!er.teacher_id||!er.subject_id)return void d().fire({icon:"warning",title:"Form belum lengkap",text:"Pilih guru dan mata pelajaran sebelum menyimpan."});eo(!0);try{await n.A.post("/lms/class-teachers",{class_id:ee.id,teacher_id:Number(er.teacher_id),subject_id:Number(er.subject_id)},{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Guru ditambahkan."}),el(C),ey(ee.id),ex()}catch(e){var t,s,r;console.error("Gagal menambahkan guru ke kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Tidak dapat menambahkan guru. Pastikan kombinasi guru & mapel belum digunakan."})}finally{eo(!1)}}},eS=async e=>{if(e.preventDefault(),!ee)return;let a=S();if(a){if(!en.student_id)return void d().fire({icon:"warning",title:"Form belum lengkap",text:"Pilih siswa terlebih dahulu."});eu(!0);try{await n.A.post("/lms/class-students",{class_id:ee.id,student_id:Number(en.student_id)},{headers:{Authorization:"Bearer ".concat(a)}}),d().fire({icon:"success",title:"Berhasil",text:"Siswa ditambahkan."}),ei(B),ey(ee.id),ex()}catch(e){var t,s,r;console.error("Gagal menambahkan siswa ke kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Tidak dapat menambahkan siswa ke kelas ini."})}finally{eu(!1)}}},eM=async e=>{var a,t,s,r,l,i;let o=S();if(o&&ee&&(await d().fire({icon:"warning",title:"Hapus guru dari kelas?",text:"Guru ".concat(null!=(s=null==e||null==(t=e.teacher)||null==(a=t.user)?void 0:a.name)?s:""," akan dilepas dari kelas ini."),showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444"})).isConfirmed)try{await n.A.delete("/lms/class-teachers/".concat(e.id),{headers:{Authorization:"Bearer ".concat(o)}}),d().fire({icon:"success",title:"Berhasil",text:"Guru dihapus dari kelas."}),ey(ee.id),ex()}catch(e){console.error("Gagal menghapus guru dari kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(i=null==e||null==(l=e.response)||null==(r=l.data)?void 0:r.message)?i:"Tidak dapat menghapus guru dari kelas ini."})}},eT=async e=>{var a,t,s,r,l,i;let o=S();if(o&&ee&&(await d().fire({icon:"warning",title:"Hapus siswa dari kelas?",text:"Siswa ".concat(null!=(s=null==e||null==(t=e.student)||null==(a=t.user)?void 0:a.name)?s:""," akan dilepas dari kelas ini."),showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444"})).isConfirmed)try{await n.A.delete("/lms/class-students/".concat(e.id),{headers:{Authorization:"Bearer ".concat(o)}}),d().fire({icon:"success",title:"Berhasil",text:"Siswa dihapus dari kelas."}),ey(ee.id),ex()}catch(e){console.error("Gagal menghapus siswa dari kelas",e),d().fire({icon:"error",title:"Gagal",text:null!=(i=null==e||null==(l=e.response)||null==(r=l.data)?void 0:r.message)?i:"Tidak dapat menghapus siswa dari kelas ini."})}};return(0,s.jsxs)("div",{className:"min-h-screen overflow-y-auto bg-gray-50",children:[(0,s.jsx)(r.A,{user:i,student:u,teacher:M}),(0,s.jsxs)("section",{className:"space-y-6 px-4 pb-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(g.A,{className:"h-10 w-10 rounded-full bg-orange-100 p-2 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Total Kelas"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-gray-900",children:eg.total})]})]})}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.A,{className:"h-10 w-10 rounded-full bg-emerald-100 p-2 text-emerald-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Aktif"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-emerald-600",children:eg.aktif})]})]})}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p,{className:"h-10 w-10 rounded-full bg-gray-100 p-2 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Nonaktif"}),(0,s.jsx)("p",{className:"text-3xl font-semibold text-gray-600",children:eg.nonaktif})]})]})})]}),(0,s.jsx)("div",{className:"rounded-2xl border border-gray-100 bg-white p-6 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,s.jsxs)("div",{className:"grid w-full grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Cari"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:L,onChange:e=>R(e.target.value),placeholder:"Nama atau deskripsi kelas",className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200"}),(0,s.jsx)(f.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Status"}),(0,s.jsxs)("select",{value:U,onChange:e=>W(e.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"all",children:"Semua"}),w.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsx)("div",{className:"flex items-center gap-3 self-end",children:(0,s.jsx)("button",{onClick:()=>{R(""),W("all"),ex()},className:"inline-flex items-center gap-2 rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Reset"})})]}),em&&(0,s.jsxs)("button",{onClick:()=>{O("create"),$(null),V(A),I(!0)},className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600",children:[(0,s.jsx)(b.A,{className:"h-4 w-4"})," Tambah Kelas"]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2 xl:grid-cols-3",children:E?(0,s.jsxs)("div",{className:"col-span-full flex items-center justify-center py-16 text-sm text-gray-500",children:[(0,s.jsx)(o.A,{className:"mr-2 h-5 w-5 animate-spin text-orange-500"})," Memuat data kelas..."]}):0===eh.length?(0,s.jsx)("p",{className:"col-span-full rounded-2xl border border-dashed border-gray-200 bg-white py-10 text-center text-sm font-medium text-gray-500",children:L||"all"!==U?"Tidak ada kelas yang cocok dengan filter.":"Belum ada data kelas yang tersedia."}):eh.map(e=>{var a,t,r,l,n;let i=(null!=(a=null==e?void 0:e.class_teachers)?a:[]).map(e=>{var a,t;return null==(t=e.teacher)||null==(a=t.user)?void 0:a.name}),d=(null!=(t=null==e?void 0:e.class_students)?t:[]).length;return(0,s.jsxs)("div",{className:"group flex h-full flex-col justify-between rounded-2xl border border-gray-100 bg-white p-6 shadow-sm transition-all duration-200 hover:border-orange-200 hover:shadow-lg",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-6 w-6 text-orange-500"}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:e.name})]}),(0,s.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat(null!=(l=N[null!=(r=e.status)?r:"aktif"])?l:N.aktif),children:(null!=(n=e.status)?n:"aktif")==="aktif"?"Aktif":"Nonaktif"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description||"Belum ada deskripsi kelas."}),(0,s.jsxs)("div",{className:"rounded-xl bg-gray-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 text-blue-500"}),(0,s.jsxs)("span",{children:[d," siswa"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y,{className:"h-4 w-4 text-purple-500"}),(0,s.jsxs)("span",{children:[i.length," guru"]})]})]}),i.length>0&&(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:[(0,s.jsx)("p",{className:"font-medium text-gray-600",children:"Guru pengajar:"}),(0,s.jsxs)("p",{children:[i.slice(0,3).join(", "),i.length>3?" dan lainnya":""]})]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex flex-wrap gap-2",children:em?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{em&&(ea(e),el(C),ei(B),Y(!0),ey(e.id))},className:"flex flex-1 items-center justify-center gap-2 rounded-xl border border-orange-200 bg-orange-50 px-4 py-2 text-sm font-medium text-orange-600 transition hover:bg-orange-100",children:"Kelola Anggota"}),(0,s.jsxs)("button",{onClick:()=>{var a,t,s;O("edit"),$(e),V({name:null!=(a=e.name)?a:"",description:null!=(t=e.description)?t:"",status:null!=(s=e.status)?s:"aktif"}),I(!0)},className:"inline-flex items-center gap-2 rounded-xl border border-emerald-200 px-4 py-2 text-sm font-medium text-emerald-600 hover:bg-emerald-50",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"})," Edit"]}),(0,s.jsxs)("button",{onClick:()=>eb(e),className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 px-4 py-2 text-sm font-medium text-rose-600 hover:bg-rose-50",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"})," Hapus"]})]}):(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Hubungi administrator untuk mengubah keanggotaan kelas."})})]},e.id)})})]}),D?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-xl rounded-2xl bg-white shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"create"===F?"Tambah Kelas":"Edit Kelas"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"create"===F?"Lengkapi form berikut untuk membuat kelas baru.":"Perbarui informasi kelas sesuai kebutuhan."})]}),(0,s.jsx)("button",{onClick:ep,className:"rounded-full p-2 text-gray-500 hover:bg-gray-100","aria-label":"Tutup",children:(0,s.jsx)("span",{className:"text-xl leading-none",children:"\xd7"})})]}),(0,s.jsxs)("form",{onSubmit:ef,className:"grid gap-4 px-6 py-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Nama Kelas"}),(0,s.jsx)("input",{type:"text",value:q.name,onChange:e=>V(a=>({...a,name:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",placeholder:"Contoh: XI PPLG 1",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Deskripsi"}),(0,s.jsx)("textarea",{value:q.description,onChange:e=>V(a=>({...a,description:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",rows:3,placeholder:"Tuliskan ringkasan atau catatan untuk kelas ini (opsional)."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-600",children:"Status Kelas"}),(0,s.jsx)("select",{value:q.status,onChange:e=>V(a=>({...a,status:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-4 py-2.5 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:w.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 border-t border-gray-100 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:ep,className:"rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Batal"}),(0,s.jsxs)("button",{type:"submit",disabled:J,className:"inline-flex items-center gap-2 rounded-xl bg-orange-500 px-5 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-70",children:[J&&(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),"create"===F?"Simpan":"Perbarui"]})]})]})]})}):null,Q&&ee?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl rounded-2xl bg-white shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Kelola Keanggotaan Kelas"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Tambah atau hapus guru dan siswa untuk kelas ",ee.name,"."]})]}),(0,s.jsx)("button",{onClick:ej,className:"rounded-full p-2 text-gray-500 hover:bg-gray-100","aria-label":"Tutup",children:(0,s.jsx)("span",{className:"text-xl leading-none",children:"\xd7"})})]}),(0,s.jsxs)("div",{className:"grid gap-6 px-6 py-6",children:[(0,s.jsx)("div",{className:"rounded-2xl bg-gray-50/60 p-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:ee.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:ee.description||"Belum ada deskripsi."})]}),(0,s.jsx)("span",{className:"h-fit rounded-full px-3 py-1 text-xs font-semibold ".concat(null!=(a=N[null!=(e=ee.status)?e:"aktif"])?a:N.aktif),children:(null!=(t=ee.status)?t:"aktif")==="aktif"?"Aktif":"Nonaktif"})]})}),et?(0,s.jsxs)("div",{className:"flex items-center justify-center py-10 text-sm text-gray-500",children:[(0,s.jsx)(o.A,{className:"mr-2 h-5 w-5 animate-spin text-orange-500"})," Memuat data kelas..."]}):(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-base font-semibold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-5 w-5 text-orange-500"})," Guru Pengajar"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Kelola guru beserta mata pelajaran yang diampu."})]})}),(0,s.jsxs)("form",{onSubmit:eB,className:"mb-4 grid gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Pilih Guru"}),(0,s.jsxs)("select",{value:er.teacher_id,onChange:e=>el(a=>({...a,teacher_id:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"",children:"Pilih guru"}),eC.map(e=>{var a,t;return(0,s.jsx)("option",{value:e.id,children:null!=(t=null==(a=e.user)?void 0:a.name)?t:"Guru ".concat(e.id)},e.id)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Mata Pelajaran"}),(0,s.jsxs)("select",{value:er.subject_id,onChange:e=>el(a=>({...a,subject_id:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"",children:"Pilih mapel"}),eA.map(e=>{var a;return(0,s.jsx)("option",{value:e.id,children:null!=(a=e.name)?a:"Mapel ".concat(e.id)},e.id)})]})]}),(0,s.jsxs)("button",{type:"submit",disabled:ed,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-70",children:[ed&&(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)(m,{className:"h-4 w-4"})," Tambah Guru"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===ev.length?(0,s.jsx)("p",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50 py-6 text-center text-sm text-gray-500",children:"Belum ada guru di kelas ini."}):ev.map(e=>{var a,t,r,l,n;return(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-gray-100 bg-white px-4 py-3 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:null!=(l=null==(t=e.teacher)||null==(a=t.user)?void 0:a.name)?l:"Nama guru tidak tersedia"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:null!=(n=null==(r=e.subject)?void 0:r.name)?n:"Mata pelajaran belum diatur"})]}),(0,s.jsxs)("button",{onClick:()=>eM(e),className:"inline-flex items-center gap-1 rounded-lg border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50",children:[(0,s.jsx)(x,{className:"h-3.5 w-3.5"})," Hapus"]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-gray-100 bg-white p-5 shadow-sm",children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-base font-semibold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-orange-500"})," Siswa Terdaftar"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Kelola anggota siswa yang tergabung."})]})}),(0,s.jsxs)("form",{onSubmit:eS,className:"mb-4 grid gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Pilih Siswa"}),(0,s.jsxs)("select",{value:en.student_id,onChange:e=>ei(a=>({...a,student_id:e.target.value})),className:"w-full rounded-xl border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200",children:[(0,s.jsx)("option",{value:"",children:"Pilih siswa"}),eN.map(e=>{var a,t;return(0,s.jsxs)("option",{value:e.id,children:[null!=(t=null==(a=e.user)?void 0:a.name)?t:"Siswa ".concat(e.id)," ",e.nis?"(".concat(e.nis,")"):""]},e.id)})]})]}),(0,s.jsxs)("button",{type:"submit",disabled:ec,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-500 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-orange-600 disabled:opacity-70",children:[ec&&(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)(m,{className:"h-4 w-4"})," Tambah Siswa"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===ek.length?(0,s.jsx)("p",{className:"rounded-xl border border-dashed border-gray-200 bg-gray-50 py-6 text-center text-sm text-gray-500",children:"Belum ada siswa di kelas ini."}):ek.map(e=>{var a,t,r,l,n;return(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-gray-100 bg-white px-4 py-3 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:null!=(l=null==(t=e.student)||null==(a=t.user)?void 0:a.name)?l:"Nama siswa tidak tersedia"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["NIS: ",null!=(n=null==(r=e.student)?void 0:r.nis)?n:"-"]})]}),(0,s.jsxs)("button",{onClick:()=>eT(e),className:"inline-flex items-center gap-1 rounded-lg border border-rose-200 px-3 py-1.5 text-xs font-medium text-rose-600 hover:bg-rose-50",children:[(0,s.jsx)(x,{className:"h-3.5 w-3.5"})," Hapus"]})]},e.id)})})]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-3 border-t border-gray-100 px-6 py-4",children:(0,s.jsx)("button",{onClick:ej,className:"rounded-xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Tutup"})})]})}):null]})}}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=89863)),_N_E=e.O()}]);