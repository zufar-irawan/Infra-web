(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9798],{1375:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},5124:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var a=t(95155),l=t(88730),r=t(12108),n=t(24033),i=t(12115),d=t(95775),o=t(26467),c=t(72226),u=t(20063);function x(e){var s,t,l,r,n,i,x,m;let{tugas:h}=e,p=(0,u.useRouter)(),g=h.deadline,f=(0,d.GP)((0,o.H)(g),"d MMM yyyy",{locale:c.id}),v=()=>{let e=null==h?void 0:h.id;null!=e&&p.push("/edu/tugas/".concat(e))};return(0,a.jsx)("div",{className:"flex items-start sm:items-center justify-between py-4 gap-2 cursor-pointer rounded-lg p-1 -m-1 hover:bg-gray-50",onClick:v,role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),v())},children:(0,a.jsxs)("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:h.title}),(0,a.jsxs)("p",{className:"text-black/60 text-sm",children:[null!=(i=null!=(n=null==(s=h.class)?void 0:s.name)?n:null==h?void 0:h.class_name)?i:"Kelas"," \xb7 ",null!=(m=null!=(x=null==(t=h.creator)?void 0:t.name)?x:null==h||null==(r=h.teacher)||null==(l=r.user)?void 0:l.name)?m:"Guru"]})]}),(0,a.jsxs)("p",{className:"text-xs text-orange-700",children:["Sampai ",f.toString()]})]})})}var m=t(20508),h=t(16485),p=t(91169),g=t(42529),f=t(26983),v=t(21786),b=t(14285),j=t(89715),y=t(93499),w=t(39867),k=t(15340),N=t(60230);function A(e){var s,t;let{student:l,tugas:r,isCompleted:n=!1}=e,{user:d,students:o}=(0,N.i)(),[c,x]=(0,i.useState)(!1),[A,M]=(0,i.useState)(!1),C=(0,u.useRouter)(),S=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=()=>new Date>new Date(r.deadline),{submittedCount:_,notSubmittedCount:T,totalClassStudents:B}=(0,i.useMemo)(()=>{if((null==d?void 0:d.role)!=="guru")return{submittedCount:0,notSubmittedCount:0,totalClassStudents:0};let e=null==r?void 0:r.class_id,s=(o||[]).filter(s=>{var t,a;let l=null!=(a=null==s?void 0:s.class_id)?a:null==s||null==(t=s.class)?void 0:t.id;return null!=l&&null!=e&&String(l)===String(e)}),t=Array.isArray(null==r?void 0:r.submissions)?r.submissions:[],a=new Set;t.forEach(e=>{var s,t;let l=null!=(t=null==e?void 0:e.student_id)?t:null==e||null==(s=e.student)?void 0:s.id;null!=l&&a.add(String(l))});let l=s.filter(e=>a.has(String(e.id))).length,n=Math.max(s.length-l,0);return{submittedCount:l,notSubmittedCount:n,totalClassStudents:s.length}},[null==d?void 0:d.role,null==r?void 0:r.class_id,null==r?void 0:r.submissions,o]),D=async e=>{var s,t;if(A)return;let a=String(null!=(s=null==l?void 0:l.id)?s:""),n=String(null!=(t=null==r?void 0:r.id)?t:"");if(!n)return void alert("ID tugas tidak tersedia.");if(!a)return void alert("ID siswa tidak tersedia.");let i=(e||[]).map(e=>(null==e?void 0:e.file)instanceof File?e.file:e).filter(e=>e instanceof File);if(0===i.length)return void alert("Pilih minimal satu file untuk diunggah.");let d=e=>String(e).padStart(2,"0"),o=new Date,c="".concat(o.getFullYear(),"-").concat(d(o.getMonth()+1),"-").concat(d(o.getDate())," ").concat(d(o.getHours()),":").concat(d(o.getMinutes()),":").concat(d(o.getSeconds()));M(!0);try{let e=new FormData;for(let s of(e.append("assignmet_id",n),e.append("student_id",a),e.append("grade","0"),e.append("feedback",""),e.append("submitted_at",c),i))e.append("files[]",s);let s=await fetch("/api/tugas/submit",{method:"POST",body:e});if(!s.ok){let e=s.headers.get("content-type")||"",t={};t=e.includes("application/json")?await s.json().catch(()=>({})):{message:await s.text().catch(()=>"")};let a=[];if((null==t?void 0:t.errors)&&"object"==typeof t.errors)for(let e of Object.keys(t.errors)){let s=t.errors[e];Array.isArray(s)&&a.push(...s)}let l=a.length?a.join("\n"):(null==t?void 0:t.message)||"Gagal mengirim tugas. Coba lagi nanti.";alert(l);return}await s.json().catch(()=>({})),alert("Tugas berhasil dikumpulkan!"),x(!1)}catch(e){console.error("Upload error:",e),alert("Terjadi kesalahan saat upload tugas.")}finally{M(!1)}},W=(null==d?void 0:d.role)==="guru",P=()=>{let e=null==r?void 0:r.id;null!=e&&C.push("/edu/tugas/".concat(e))},z=(0,i.useMemo)(()=>W?(Array.isArray(null==r?void 0:r.submissions)?r.submissions:[]).map((e,s)=>{var t,a,l,r,n,i,d,o,c,u;let x=null!=(i=null!=(r=null==e||null==(a=e.student)||null==(t=a.user)?void 0:t.name)?r:null==e||null==(l=e.student)?void 0:l.name)?i:"Siswa ".concat(null!=(n=null==e?void 0:e.student_id)?n:s+1),m=(Array.isArray(null==e?void 0:e.files)?e.files:[]).map((e,s)=>e?"string"==typeof e?{id:s,path:e}:"object"==typeof e?e:null:null).filter(e=>!!e&&(!!e.path||!!e.url));return{key:String(null!=(o=null!=(d=null==e?void 0:e.id)?d:null==e?void 0:e.submission_id)?o:"".concat(s)),studentName:x,files:m,submittedAt:null!=(u=null!=(c=null==e?void 0:e.submitted_at)?c:null==e?void 0:e.created_at)?u:null}}).filter(e=>e.files.length>0):[],[W,null==r?void 0:r.submissions]),H=e=>{e&&window.open(e,"_blank","noopener,noreferrer")};return(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-2xl flex flex-col items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-full border-4 border-gray-200"}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full border-4 border-t-orange-500 border-r-orange-400 border-b-transparent border-l-transparent animate-spin absolute top-0 left-0"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:"Mengunggah tugas..."})]})}),(0,a.jsxs)("div",{className:"flex items-start sm:items-center justify-between py-4 gap-2",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex-1 cursor-pointer rounded-lg p-1 -m-1 hover:bg-gray-50",onClick:P,role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),P())},children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:r.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(null==(t=r.teacher)||null==(s=t.user)?void 0:s.name)||"Guru"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Deadline: ",S(r.deadline)]})]}),W&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Total siswa kelas: ",B]})]})]}),r.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:r.description})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:W?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"w-3 h-3"}),"Mengumpulkan: ",_]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),"Belum: ",T]})]}):(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(n?"bg-green-100 text-green-700":L()?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"),children:n?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"w-3 h-3"}),"Selesai"]}):L()?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),"Terlambat"]}):(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),"Pending"]})})})]}),!W&&(0,a.jsx)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:n?(0,a.jsxs)("button",{className:"text-sm bg-emerald-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-emerald-600 hover:shadow transition-all duration-200",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),"Sudah Dikumpulkan"]}):(0,a.jsxs)("button",{onClick:()=>x(!0),className:"text-sm px-4 py-2 rounded-lg flex items-center gap-2 hover:shadow transition-all duration-200 ".concat(L()?"bg-red-500 text-white hover:bg-red-600":"bg-orange-500 text-white hover:bg-orange-600"),children:[(0,a.jsx)(v.A,{className:"w-4 h-4"}),L()?"Upload (Terlambat)":"Upload Tugas"]})})]}),!W&&(0,a.jsx)(k.A,{isOpen:c,onClose:()=>x(!1),tugasId:r.id,tugasTitle:r.title,deadline:r.deadline,onUploadComplete:e=>{D(e)}}),W&&z.length>0&&(0,a.jsxs)("div",{className:"mt-3 rounded-xl border border-blue-100 bg-blue-50/60 px-4 py-3",children:[(0,a.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"w-3.5 h-3.5"}),"Lampiran Pengumpulan"]}),(0,a.jsx)("div",{className:"mt-2 space-y-3",children:z.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border border-blue-100 bg-white px-3 py-2 shadow-sm",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-3",children:(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:e.studentName}),e.submittedAt&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:S(e.submittedAt)})]})}),(0,a.jsx)("div",{className:"mt-2 space-y-1.5",children:e.files.map((s,t)=>{var l;let r=(e=>{var s,t;let a=null!=(t=null!=(s=null==e?void 0:e.url)?s:null==e?void 0:e.path)?t:"";if(!a)return"";if(/^https?:\/\//i.test(a))return a;let l=a.replace(/^\/+/,""),r=l.startsWith("storage/")?l.slice(8):l;return"".concat("https://api.smkprestasiprima.sch.id/storage","/").concat(r)})(s),n=(null==s?void 0:s.name)||(null==s?void 0:s.original_name)||(null==s?void 0:s.filename)||(null==s?void 0:s.path)||"Lampiran ".concat(t+1);return(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-blue-100 bg-blue-50/60 px-3 py-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,a.jsx)("a",{href:r||void 0,target:r?"_blank":void 0,rel:r?"noopener noreferrer":void 0,className:"truncate font-medium text-blue-700 hover:underline",children:n})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>H(r),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Buka lampiran",children:(0,a.jsx)(y.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{type:"button",onClick:()=>H(r),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Unduh",children:(0,a.jsx)(w.A,{className:"w-4 h-4"})})]})]},String(null!=(l=null==s?void 0:s.id)?l:"".concat(e.key,"-").concat(t)))})})]},e.key))})]})]})}var M=t(95125),C=t(42196),S=t(60890),L=t(43586),_=t(1375),T=t(92001),B=t(65229),D=t(6132),W=t(71360);function P(e){let{isOpen:s,onClose:t,onSuccess:l,teacher:r,subjects:n,classes:d,rooms:o}=e,[c,u]=(0,i.useState)(!1),[x,m]=(0,i.useState)([]),[h,p]=(0,i.useState)(!1),f=(0,i.useRef)(null),[b,y]=(0,i.useState)({subject_id:"",class_id:"",title:"",description:"",deadline:"",links:""}),w=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},k=e=>e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":e.type.includes("zip")||e.type.includes("rar")?"archive":e.type.includes("pdf")||e.type.includes("document")||e.type.includes("text")?"document":"other",N=e=>new Promise(s=>{if(e.type.startsWith("image/")){let t=new FileReader;t.onload=e=>{var t;return s(null==(t=e.target)?void 0:t.result)},t.readAsDataURL(e)}else s(void 0)}),A=e=>e.size>0x3200000?{valid:!1,error:"File terlalu besar. Maksimal 50MB"}:["image/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","video/*","audio/*","application/zip","application/x-rar-compressed"].some(s=>s.endsWith("/*")?e.type.startsWith(s.slice(0,-1)):e.type===s)?{valid:!0}:{valid:!1,error:"Tipe file tidak didukung"},P=(0,i.useCallback)(async e=>{let s=[],t=[];for(let a=0;a<e.length;a++){let l=e[a],r=A(l);if(!r.valid){t.push("".concat(l.name,": ").concat(r.error));continue}if(x.length+s.length>=10){t.push("Maksimal 10 file");break}let n=k(l),i=await N(l);s.push({id:"".concat(Date.now(),"-").concat(Math.random()),file:l,preview:i,type:n,size:w(l.size),status:"pending"})}t.length>0&&alert(t.join("\n")),s.length>0&&m(e=>[...e,...s])},[x]),z=async e=>{if(e.preventDefault(),!b.class_id||!b.title||!b.deadline)return void alert("Semua field wajib harus diisi!");u(!0);try{m(e=>e.map(e=>({...e,status:"uploading",progress:void 0})));let e=new FormData;e.append("created_by",String(r.user_id)),e.append("class_id",b.class_id),b.subject_id&&e.append("subject_id",b.subject_id),e.append("title",b.title),b.description&&e.append("description",b.description),b.deadline&&e.append("deadline",b.deadline),b.links&&e.append("links[]",b.links),x.forEach(s=>{e.append("files[]",s.file)}),await M.A.post("/api/tugas",e,{headers:{"Content-Type":"multipart/form-data"}}),m(e=>e.map(e=>({...e,status:"completed",progress:100}))),alert("Tugas berhasil dibuat!"),H(),null==l||l(),t()}catch(e){console.error("Error creating task:",e),m(e=>e.map(e=>({...e,status:"error",error:"Gagal mengunggah file"}))),alert("Gagal membuat tugas. Silakan coba lagi.")}finally{u(!1)}},H=()=>{y({subject_id:"",class_id:"",title:"",description:"",deadline:"",links:""}),m([])},q=()=>{H(),t()};return s?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Buat Tugas Baru"}),(0,a.jsx)("button",{onClick:q,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",disabled:c,children:(0,a.jsx)(B.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:z,className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Mata Pelajaran ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:b.subject_id,onChange:e=>y(s=>({...s,subject_id:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Pilih Mata Pelajaran"}),n.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Kelas ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:b.class_id,onChange:e=>y(s=>({...s,class_id:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Pilih Kelas"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Judul Tugas ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:b.title,onChange:e=>y(s=>({...s,title:e.target.value})),placeholder:"Masukkan judul tugas...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Deskripsi ",(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opsional)"})]}),(0,a.jsx)("textarea",{value:b.description,onChange:e=>y(s=>({...s,description:e.target.value})),placeholder:"Masukkan deskripsi tugas...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Tenggat Waktu ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"datetime-local",value:b.deadline,onChange:e=>y(s=>({...s,deadline:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["File Lampiran ",(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opsional)"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative border-2 border-dashed rounded-xl p-6 text-center transition-all duration-300 ".concat(h?"border-orange-400 bg-orange-50 scale-[1.02]":"border-gray-300 hover:border-orange-300 hover:bg-orange-50/30"),onDragOver:e=>{e.preventDefault(),p(!0)},onDragLeave:e=>{e.preventDefault(),p(!1)},onDrop:e=>{e.preventDefault(),p(!1);let s=e.dataTransfer.files;s.length>0&&P(s)},onClick:()=>{f.current&&f.current.click()},children:[(0,a.jsx)("input",{ref:f,type:"file",multiple:!0,accept:"image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,video/*,audio/*,application/zip,application/x-rar-compressed",onChange:e=>{let s=e.target.files;s&&s.length>0&&P(s),f.current&&(f.current.value="")},className:"hidden"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-full transition-colors ".concat(h?"bg-orange-100":"bg-gray-100"),children:(0,a.jsx)(v.A,{className:"w-6 h-6 ".concat(h?"text-orange-600":"text-gray-600")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:h?"Lepaskan file di sini":"Klik atau drag & drop file"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Maksimal 10 file, 50MB per file"})]})]})]}),x.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"w-4 h-4"}),"File Terpilih (",x.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:x.map(e=>{var s;let t=(s=e.file.type).startsWith("image/")?C.A:s.includes("pdf")||s.includes("document")?j.A:s.startsWith("video/")?S.A:s.startsWith("audio/")?L.A:s.includes("zip")||s.includes("rar")?_.A:T.A;return(0,a.jsx)("div",{className:"bg-white border rounded-lg p-3 transition-all duration-200 ".concat("completed"===e.status?"border-green-200 bg-green-50":"error"===e.status?"border-red-200 bg-red-50":"border-gray-200"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat("completed"===e.status?"bg-green-100":"error"===e.status?"bg-red-100":"bg-gray-100"),children:(0,a.jsx)(t,{className:"w-4 h-4 ".concat("completed"===e.status?"text-green-600":"error"===e.status?"text-red-600":"text-gray-600")})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:e.file.name}),"completed"===e.status&&(0,a.jsx)(g.A,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),"error"===e.status&&(0,a.jsx)(D.A,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.size}),"uploading"===e.status&&void 0!==e.progress&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-orange-500 h-1 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{var s;return s=e.id,void m(e=>e.filter(e=>e.id!==s))},className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",disabled:"uploading"===e.status,children:(0,a.jsx)(W.A,{className:"w-4 h-4"})})]})},e.id)})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Link Referensi ",(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opsional)"})]}),(0,a.jsx)("input",{type:"url",value:b.links,onChange:e=>y(s=>({...s,links:e.target.value})),placeholder:"https://example.com/referensi-belajar",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:q,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",disabled:c,children:"Batal"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:c?"Membuat...":"Buat Tugas"})]})]})]})}):null}function z(){let{user:e,student:s,tugas:t,teacher:d,teachers:o,subjects:c,classes:u,rooms:m}=(0,N.i)(),[h,p]=(0,i.useState)([]),[g,f]=(0,i.useState)([]),[v,b]=(0,i.useState)([]),[j,y]=(0,i.useState)(0),[w,k]=(0,i.useState)(!1),[M,C]=(0,i.useState)(""),[S,L]=(0,i.useState)("all"),[_,T]=(0,i.useState)("all"),B=(0,i.useMemo)(()=>{var e,t,a,l,r;return null!=(r=null!=(l=null!=(a=null!=(t=null==s||null==(e=s.class)?void 0:e.id)?t:null==s?void 0:s.class_id)?a:null==s?void 0:s.classId)?l:null==d?void 0:d.class_id)?r:null},[s]);(0,i.useEffect)(()=>{if(!t)return;let s=[];if((null==e?void 0:e.role)==="guru"){var a;let l=null!=(a=null==d?void 0:d.user_id)?a:e.id;s=t.filter(e=>{var s;return(null!=(s=e.created_by)?s:e.teacher_id)===l})}else{if((null==e?void 0:e.role)!=="siswa"||!B)return void b([]);s=t.filter(e=>e.class_id===B)}b(s.map(s=>{if((null==e?void 0:e.role)==="guru")return{...s,teacher:d};if((null==e?void 0:e.role)==="siswa"){let e=Array.isArray(o)?o.find(e=>e.user_id===s.created_by):null;return{...s,teacher:e}}return s}))},[t,d,o,B,e]),(0,i.useEffect)(()=>{if(!v)return;let e=v.filter(e=>!e.submissions||0===e.submissions.length),s=v.filter(e=>e.submissions&&e.submissions.length>0);p(e),f(s)},[v]),(0,i.useEffect)(()=>{y(0)},[h]);let[D,W]=(0,i.useState)({}),z=()=>v?v.filter(e=>{var s;let t=(null==(s=e.teacher)?void 0:s.specialization)||"Mata Pelajaran Lain",a=e.submissions&&e.submissions.length>0,l=""===M||t.toLowerCase().includes(M.toLowerCase())||e.title.toLowerCase().includes(M.toLowerCase()),r="all"===S||t===S,n="all"===_||"selesai"===_&&a||"belum"===_&&!a;return l&&r&&n}):[];return(0,a.jsxs)(a.Fragment,{children:[(null==e?void 0:e.role)==="siswa"&&(0,a.jsxs)("div",{className:"overflow-y-auto min-h-screen",children:[(0,a.jsx)(l.A,{user:e,student:s}),(0,a.jsxs)("div",{className:"w-full p-4 flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"lg:flex-1 bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4 h-[200px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Tugas Belum Dikerjakan"}),(0,a.jsx)("p",{className:"text-black/60 text-sm",children:"Daftar tugas belum dikerjakan anda"})]}),h&&h.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{h&&h.length>0&&y(e=>(e-1+h.length)%h.length)},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",disabled:h.length<=1,children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[j+1," / ",h.length]}),(0,a.jsx)("button",{onClick:()=>{h&&h.length>0&&y(e=>(e+1)%h.length)},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",disabled:h.length<=1,children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]}),(0,a.jsx)("div",{className:"flex-1 flex items-center",children:h&&h.length>0?(0,a.jsx)("div",{className:"w-full overflow-hidden",children:(0,a.jsx)("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*j,"%)")},children:h.map((e,s)=>(0,a.jsx)("div",{className:"w-full flex-shrink-0",children:(0,a.jsx)("div",{className:"border-t border-black/10 pt-4",children:(0,a.jsx)(x,{tugas:e})})},s))})}):(0,a.jsxs)("div",{className:"w-full flex flex-col items-center justify-center py-4 bg-gray-50 rounded-xl border border-dashed border-orange-200 h-[80px]",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-orange-400 mb-1",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-orange-600 mb-0.5",children:"Semua tugas sudah selesai!"}),(0,a.jsx)("p",{className:"text-black/60 text-xs",children:"Tidak ada tugas pending. Pertahankan prestasimu!"})]})})]}),(0,a.jsxs)("div",{className:"w-full lg:w-auto lg:min-w-[400px] grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,a.jsx)("div",{className:"bg-red-100 p-3 rounded-full mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-red-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-red-600 mb-2",children:h?h.length:0}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Tugas Belum Selesai"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Perlu dikerjakan"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:g?g.length:0}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Tugas Sudah Selesai"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sudah dikumpulkan"})]})]})]}),(0,a.jsx)("section",{className:"w-full px-4 pb-4",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),(0,a.jsx)("input",{type:"text",placeholder:"Cari berdasarkan mata pelajaran atau judul tugas...",value:M,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 focus:outline-none rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm"})]}),(0,a.jsx)("div",{className:"w-full sm:w-auto",children:(0,a.jsxs)("select",{value:S,onChange:e=>L(e.target.value),className:"w-full sm:w-48 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,a.jsx)("option",{value:"all",children:"Semua Mata Pelajaran"}),(!v?[]:[...new Set(v.map(e=>{var s;return(null==(s=e.teacher)?void 0:s.specialization)||"Mata Pelajaran Lain"}))]).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)("div",{className:"w-full sm:w-auto",children:(0,a.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"w-full sm:w-40 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,a.jsx)("option",{value:"all",children:"Semua Status"}),(0,a.jsx)("option",{value:"belum",children:"Belum Dikerjakan"}),(0,a.jsx)("option",{value:"selesai",children:"Sudah Selesai"})]})}),(""!==M||"all"!==S||"all"!==_)&&(0,a.jsxs)("button",{onClick:()=>{C(""),L("all"),T("all")},className:"w-full sm:w-auto px-4 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-colors duration-200 text-sm font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),"Reset"]})]})})}),(0,a.jsx)("section",{id:"list-tugas",className:"w-full grid grid-cols-1 gap-4 p-4",children:(()=>{let e=z();return e&&e.length>0?Object.entries(e.reduce((e,s)=>{var t;let a=(null==(t=s.teacher)?void 0:t.specialization)||"Mata Pelajaran Lain";return e[a]||(e[a]=[]),e[a].push(s),e},{})).map(e=>{var t,l,i;let[d,o]=e;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>W(e=>({...e,[d]:!e[d]})),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:d}),(0,a.jsxs)("p",{className:"text-black/60 text-sm",children:[o.length," Tugas • ",(null==(i=o[0])||null==(l=i.teacher)||null==(t=l.user)?void 0:t.name)||"Guru"]})]}),(0,a.jsx)("span",{className:"p-1 rounded hover:bg-gray-100 transition","aria-label":D[d]?"Tutup":"Buka",children:D[d]?(0,a.jsx)(r.A,{className:"w-5 h-5"}):(0,a.jsx)(n.A,{className:"w-5 h-5"})})]}),D[d]&&(0,a.jsx)("div",{className:"divide-y divide-black/10 transition-all duration-300",children:o.map(e=>(0,a.jsx)(A,{student:s,tugas:e,isCompleted:e.submissions&&e.submissions.length>0},e.id))})]},d)}):(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Tidak ada tugas."})})()})]}),(null==e?void 0:e.role)==="guru"&&(0,a.jsxs)("div",{className:"overflow-y-auto min-h-screen",children:[(0,a.jsx)(l.A,{user:e,teacher:d}),(0,a.jsxs)("div",{className:"w-full p-4 flex flex-col lg:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"lg:flex-1 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 shadow-md border border-orange-400 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col justify-center items-center text-center h-[200px] cursor-pointer group",onClick:()=>k(!0),children:[(0,a.jsx)("div",{className:"bg-white/20 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-10 h-10 text-white",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Buat Tugas Baru"}),(0,a.jsx)("p",{className:"text-white/90 text-sm",children:"Klik untuk membuat tugas baru untuk siswa"})]}),(0,a.jsxs)("div",{className:"w-full lg:w-auto lg:min-w-[400px] grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-blue-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})})}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-blue-600 mb-2",children:v?v.length:0}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Total Tugas"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Tugas yang dibuat"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col items-center justify-center text-center h-[200px]",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-green-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:h?h.length:0}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Tugas Aktif"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sedang berjalan"})]})]})]}),(0,a.jsx)("section",{className:"w-full px-4 pb-4",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),(0,a.jsx)("input",{type:"text",placeholder:"Cari berdasarkan mata pelajaran atau judul tugas...",value:M,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 focus:outline-none rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm"})]}),(0,a.jsx)("div",{className:"w-full sm:w-auto",children:(0,a.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"w-full sm:w-40 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm bg-white",children:[(0,a.jsx)("option",{value:"all",children:"Semua Status"}),(0,a.jsx)("option",{value:"belum",children:"Belum Dikerjakan"}),(0,a.jsx)("option",{value:"selesai",children:"Sudah Selesai"})]})}),(""!==M||"all"!==S||"all"!==_)&&(0,a.jsxs)("button",{onClick:()=>{C(""),L("all"),T("all")},className:"w-full sm:w-auto px-4 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-colors duration-200 text-sm font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),"Reset"]})]})})}),(0,a.jsx)("section",{id:"list-tugas",className:"w-full grid grid-cols-1 gap-4 p-4",children:(()=>{let e=z();return e&&e.length>0?Object.entries(e.reduce((e,s)=>{var t;let a=(null==(t=s.teacher)?void 0:t.specialization)||"Mata Pelajaran Lain";return e[a]||(e[a]=[]),e[a].push(s),e},{})).map(e=>{var t,l,i;let[d,o]=e;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>W(e=>({...e,[d]:!e[d]})),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:d}),(0,a.jsxs)("p",{className:"text-black/60 text-sm",children:[o.length," Tugas • ",(null==(i=o[0])||null==(l=i.teacher)||null==(t=l.user)?void 0:t.name)||"Guru"]})]}),(0,a.jsx)("span",{className:"p-1 rounded hover:bg-gray-100 transition","aria-label":D[d]?"Tutup":"Buka",children:D[d]?(0,a.jsx)(r.A,{className:"w-5 h-5"}):(0,a.jsx)(n.A,{className:"w-5 h-5"})})]}),D[d]&&(0,a.jsx)("div",{className:"divide-y divide-black/10 transition-all duration-300",children:o.map(e=>(0,a.jsx)(A,{student:s,tugas:e,isCompleted:e.submissions&&e.submissions.length>0},e.id))})]},d)}):(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Tidak ada tugas."})})()})]}),(0,a.jsx)(P,{isOpen:w,onClose:()=>k(!1),onSuccess:()=>{window.location.reload()},teacher:d,subjects:c,rooms:m,classes:u})]})}},6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},12108:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},14285:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},16485:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},18085:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"redirect")&&t.d(s,{redirect:function(){return a.redirect}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},20508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21786:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},24033:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},26983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},39867:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},42196:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},43586:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},44451:(e,s,t)=>{Promise.resolve().then(t.bind(t,5124))},60890:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},65229:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},88730:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155),l=t(9540);function r(e){let{student:s,user:t,teacher:r}=e,n=window.location.pathname,i=(null==s?void 0:s.class.name)||"Tidak ada kelas",d=(null==t?void 0:t.role)||"guest",o=(null==r?void 0:r.specialization)||"Tidak ada mapel";return(0,a.jsxs)("section",{id:"header",className:"w-full flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleSidebar"))},children:(0,a.jsx)(l.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:(()=>{switch(!0){case n.startsWith("/edu/dashboard"):return"Dashboard ".concat("admin"===d?"Admin":"guru"===d?"Guru":"Siswa");case n.startsWith("/edu/tugas"):return"Tugas Anda";case n.startsWith("/edu/ujian"):return"Ujian Anda";case n.startsWith("/edu/nilai"):return"Nilai Anda";case n.startsWith("/edu/jadwal"):return"Jadwal";case n.startsWith("/edu/setelan"):return"Setelan";case n.startsWith("/edu/perangkat"):return"Perangkat";case n.startsWith("/edu/rfid"):return"RFID Card";default:return""}})()}),(0,a.jsxs)("p",{className:"text-black/60 text-sm sm:text-base",children:["Selamat datang kembali, ",(null==t?void 0:t.name)||"Loading...","."]})]})]}),(0,a.jsx)("p",{className:"bg-emerald-200 text-emerald-800 px-3 py-2 text-xs sm:text-sm rounded-sm",children:(null==t?void 0:t.role)==="siswa"?i.replaceAll("-"," "):(null==t?void 0:t.role)==="guru"?o.replaceAll("-"," "):(null==t?void 0:t.role)==="admin"?"Administrator":"Tamu"})]})}t(12115)},89715:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},91169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},92001:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},93499:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{e.O(0,[5125,865,2929,8441,1255,7358],()=>e(e.s=44451)),_N_E=e.O()}]);