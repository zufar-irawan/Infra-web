(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3036],{47904:(e,l,s)=>{Promise.resolve().then(s.bind(s,69631))},69631:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>A});var n=s(95155),i=s(12115),a=s(20063),t=s(95125),r=s(60230),d=s(35299),o=s(78874),u=s(20508),c=s(50859),m=s(93499),x=s(89715),h=s(39867),g=s(26983),p=s(14285),b=s(61362),v=s(16485),f=s(15340),j=s(68407),y=s.n(j);function N(e){if(!e)return"-";let l=new Date(e);return isNaN(l.getTime())?e:l.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function w(e){try{let l=e.split("/");return l[l.length-1]||e}catch(l){return e}}function k(e){var l,s;let n=null!=(s=null!=(l=null==e?void 0:e.url)?l:null==e?void 0:e.path)?s:"";if(!n)return"";if(/^https?:\/\//i.test(n))return n;let i=n.replace(/^\/+/,""),a=i.startsWith("storage/")?i.slice(8):i;return"".concat("https://api.smkprestasiprima.sch.id/storage","/").concat(a)}function A(){var e,l,s,j,A,S,_,C,M,T,B,D,I,L,E,U,O,G,F,P;let{user:z,student:K,students:R}=(0,r.i)(),V=(0,a.useParams)(),W=(0,a.useRouter)(),H=(0,i.useMemo)(()=>(null==V?void 0:V.id)?String(V.id):void 0,[null==V?void 0:V.id]),[J,Y]=(0,i.useState)(null),[q,Q]=(0,i.useState)(!1),[X,Z]=(0,i.useState)(null),[$,ee]=(0,i.useState)(!1),[el,es]=(0,i.useState)(null),en=(0,i.useMemo)(()=>{if((null==z?void 0:z.role)!=="siswa")return!1;let e=(null==K?void 0:K.id)!=null?String(K.id):"";return!!e&&(Array.isArray(null==J?void 0:J.submissions)?J.submissions:[]).some(l=>{var s,n;return String(null!=(n=null==l?void 0:l.student_id)?n:null==l||null==(s=l.student)?void 0:s.id)===e})},[null==z?void 0:z.role,null==K?void 0:K.id,null==J?void 0:J.submissions]),ei=(0,i.useMemo)(()=>{if((null==z?void 0:z.role)!=="siswa")return null;let e=(null==K?void 0:K.id)!=null?String(K.id):"";return e&&(Array.isArray(null==J?void 0:J.submissions)?J.submissions:[]).find(l=>{var s,n;return String(null!=(n=null==l?void 0:l.student_id)?n:null==l||null==(s=l.student)?void 0:s.id)===e})||null},[null==z?void 0:z.role,null==K?void 0:K.id,null==J?void 0:J.submissions]),ea=(0,i.useMemo)(()=>{var e,l;let s=null!=(l=null!=(e=null==ei?void 0:ei.grade)?e:null==ei?void 0:ei.score)?l:null==ei?void 0:ei.value;return null!=s&&""!==s?s:null},[ei]),et=(0,i.useMemo)(()=>ei?(Array.isArray(null==ei?void 0:ei.files)?ei.files:[]).map((e,l)=>e?"string"==typeof e?{id:l,path:e}:"object"==typeof e?e:null:null).filter(e=>!!e&&(!!e.path||!!e.url)):[],[ei]),er=async e=>{try{var l,s,n;let i=String(null!=(s=null!=(l=null==J?void 0:J.id)?l:H)?s:""),a=String(null!=(n=null==K?void 0:K.id)?n:"");if(!i||!a)return void alert("ID tugas atau siswa tidak tersedia.");let t=(e||[]).map(e=>(null==e?void 0:e.file)instanceof File?e.file:null).filter(e=>e instanceof File);if(0===t.length)return void alert("Tidak ada file yang dipilih.");let r=e=>String(e).padStart(2,"0"),d=new Date,o="".concat(d.getFullYear(),"-").concat(r(d.getMonth()+1),"-").concat(r(d.getDate())," ").concat(r(d.getHours()),":").concat(r(d.getMinutes()),":").concat(r(d.getSeconds())),u=new FormData;u.append("assignment_id",i),u.append("student_id",a),u.append("grade","0"),u.append("feedback",""),u.append("submitted_at",o),t.forEach(e=>u.append("files[]",e));let c=await fetch("/api/tugas/submit",{method:"POST",body:u});if(!c.ok){let e;e=(c.headers.get("content-type")||"").includes("application/json")?await c.json().catch(()=>({})):{message:await c.text().catch(()=>"")};let l=[];if((null==e?void 0:e.errors)&&"object"==typeof e.errors)for(let s of Object.keys(e.errors)){let n=e.errors[s];Array.isArray(n)&&l.push(...n)}let s=l.length?l.join("\n"):(null==e?void 0:e.message)||"Gagal mengirim tugas. Coba lagi nanti.";alert(s);return}await c.json().catch(()=>({})),alert("Tugas berhasil dikumpulkan!"),Y(e=>{if(!e)return e;let l=Array.isArray(e.submissions)?e.submissions:[];return{...e,submissions:[...l,{student_id:Number.isNaN(Number(a))?a:Number(a),submitted_at:o}]}}),ee(!1)}catch(e){console.error("Upload error:",e),alert("Terjadi kesalahan saat upload tugas.")}};(0,i.useEffect)(()=>{if(!H)return;let e=!1;return Q(!0),Z(null),t.A.get("/api/tugas/".concat(encodeURIComponent(H))).then(l=>{var s,n;e||Y((null!=(n=null==(s=l.data)?void 0:s.data)?n:l.data)||null)}).catch(l=>{var s,n;e||Z((null==l||null==(n=l.response)||null==(s=n.data)?void 0:s.message)||(null==l?void 0:l.message)||"Gagal memuat detail tugas")}).finally(()=>{e||Q(!1)}),()=>{e=!0}},[H]);let ed=(0,i.useMemo)(()=>((null==J?void 0:J.links)&&Array.isArray(J.links)?J.links:void 0)||((null==J?void 0:J.reference_links)&&Array.isArray(J.reference_links)?J.reference_links:void 0)||[],[null==J?void 0:J.links,null==J?void 0:J.reference_links]),eo=(0,i.useMemo)(()=>{var e;let l=null!=(e=null==J?void 0:J.files)?e:[];return Array.isArray(l)?l.map((e,l)=>"string"==typeof e?{id:l,path:e}:e&&"object"==typeof e?e:{id:l,path:String(null!=e?e:"")}).filter(e=>!!e.path):[]},[null==J?void 0:J.files]),eu=async e=>{if(null==e?void 0:e.path){if("link"===e.type)return void window.open(e.path,"_blank","noopener,noreferrer");if(e.id&&(null==J?void 0:J.id)){var l,s;let n=(l=J.id,s=e.id,"/api/tugas/files/".concat(l,"/").concat(s));window.open(n,"_blank","noopener,noreferrer")}}},ec=e=>{e&&window.open(e,"_blank","noopener,noreferrer")},em=(0,i.useMemo)(()=>{var e,l;return null!=(l=null==J?void 0:J.class_id)?l:null==J||null==(e=J.class)?void 0:e.id},[null==J?void 0:J.class_id,null==J?void 0:J.class]),{classStudents:ex,submittedIds:eh}=(0,i.useMemo)(()=>{let e=Array.isArray(R)?R:[],l=null!=em?String(em):null,s=e.filter(e=>{var s,n;let i=null!=(n=null==e?void 0:e.class_id)?n:null==e||null==(s=e.class)?void 0:s.id;return null!=i&&null!=l&&String(i)===l}),n=Array.isArray(null==J?void 0:J.submissions)?J.submissions:[],i=new Set;return n.forEach(e=>{var l,s;let n=null!=(s=null==e?void 0:e.student_id)?s:null==e||null==(l=e.student)?void 0:l.id;null!=n&&i.add(String(n))}),{classStudents:s,submittedIds:i}},[R,em,null==J?void 0:J.submissions]),eg=e=>{let l=Array.isArray(null==J?void 0:J.submissions)?J.submissions:[],s=String(e);return l.find(e=>{var l,n;return String(null!=(n=null==e?void 0:e.student_id)?n:null==e||null==(l=e.student)?void 0:l.id)===s})},ep=async e=>{try{var l,s,n,i,a,t,r,d,o,u,c,m;let x=eg(null==e?void 0:e.id);if(!x)return void await y().fire({icon:"info",title:"Belum mengumpulkan",text:"Siswa belum mengumpulkan, tidak bisa memberikan nilai."});let h=null!=(m=null!=(c=null!=(u=null!=(o=null!=(d=null==x?void 0:x.id)?d:null==x?void 0:x.submission_id)?o:null==x||null==(t=x.pivot)?void 0:t.id)?u:null==x||null==(r=x.pivot)?void 0:r.submission_id)?c:null==x?void 0:x.assignment_submission_id)?m:null;if(!h)return void await y().fire({icon:"error",title:"ID submission tidak ditemukan"});let g=null!=(n=null!=(s=null!=(l=null==x?void 0:x.grade)?l:null==x?void 0:x.score)?s:null==x?void 0:x.value)?n:"",p=null!=(i=null==x?void 0:x.feedback)?i:"";es(String(null!=(a=null==e?void 0:e.id)?a:""));let b=await y().fire({title:""!==g?"Edit Nilai":"Beri Nilai",html:'\n          <div style="text-align:left">\n            <label for="swal-input-grade" style="font-size:12px;color:#4b5563;">Nilai (0-100) <span style="color:#ef4444">*</span></label>\n            <input id="swal-input-grade" class="swal2-input" placeholder="Contoh: 85" value="'.concat(String(g),'" inputmode="numeric" />\n            <label for="swal-input-feedback" style="font-size:12px;color:#4b5563;margin-top:6px;display:block;">Feedback (opsional)</label>\n            <textarea id="swal-input-feedback" class="swal2-textarea" placeholder="Masukan feedback untuk siswa" rows="3">').concat(String(p),"</textarea>\n          </div>\n        "),focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal",showLoaderOnConfirm:!0,allowOutsideClick:()=>!y().isLoading(),preConfirm:async()=>{var e,l,s,n;let i=document.getElementById("swal-input-grade"),a=document.getElementById("swal-input-feedback"),t=null!=(s=null==i||null==(e=i.value)?void 0:e.trim())?s:"",r=null!=(n=null==a||null==(l=a.value)?void 0:l.trim())?n:"";if(!t)return void y().showValidationMessage("Nilai wajib diisi");let d=!Number.isNaN(Number(t));if(d){let e=Number(t);if(e<0||e>100)return void y().showValidationMessage("Nilai harus antara 0 dan 100")}try{let e=await fetch("/api/tugas/".concat(encodeURIComponent(String(h))),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({grade:t,...r?{feedback:r}:{}})}),l=(e.headers.get("content-type")||"").includes("application/json")?await e.json().catch(()=>({})):await e.text().catch(()=>"");if(!e.ok){let e="string"==typeof l?l:(null==l?void 0:l.message)||(null==l?void 0:l.error)||"Gagal menyimpan nilai";y().showValidationMessage(e);return}return{grade:d?Number(t):t,feedback:r||void 0}}catch(e){y().showValidationMessage((null==e?void 0:e.message)||"Gagal menyimpan nilai");return}}});if(b.isConfirmed&&b.value){let{grade:l,feedback:s}=b.value;Y(n=>{if(!n)return n;let i=Array.isArray(n.submissions)?[...n.submissions]:[],a=i.findIndex(l=>{var s,n;return String(null!=(n=null==l?void 0:l.student_id)?n:null==l||null==(s=l.student)?void 0:s.id)===String(null==e?void 0:e.id)});if(a>=0){let e={...i[a]};e.grade=l,void 0!==s&&(e.feedback=s),i[a]=e}return{...n,submissions:i}}),await y().fire({icon:"success",title:"Nilai berhasil disimpan"})}}catch(e){console.error("Grade error:",e),await y().fire({icon:"error",title:"Terjadi kesalahan",text:"Gagal menyimpan nilai."})}finally{es(null)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between",children:[(0,n.jsxs)("button",{onClick:()=>W.back(),className:"flex items-center gap-2 text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),(0,n.jsx)("span",{className:"font-medium",children:"Kembali"})]}),(null==z?void 0:z.role)==="siswa"&&!en&&(0,n.jsx)("button",{onClick:()=>ee(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm",disabled:!(null==J?void 0:J.id),children:"Kumpulkan Tugas"})]})}),(0,n.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 lg:py-8",children:[q&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)(d.A,{className:"w-8 h-8 animate-spin text-blue-600 mb-3"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Memuat detail tugas..."})]}),X&&(0,n.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)(o.A,{className:"w-5 h-5 text-red-500 mt-0.5 mr-3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-red-800",children:"Terjadi Kesalahan"}),(0,n.jsx)("p",{className:"text-red-700 text-sm mt-1",children:X})]})]})}),!q&&!X&&J&&(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-8 text-white",children:(0,n.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h1",{className:"text-2xl sm:text-3xl font-semibold mb-2",children:J.title}),(null==(l=J.teacher)||null==(e=l.user)?void 0:e.name)||(null==(s=J.creator)?void 0:s.name)?(0,n.jsxs)("p",{className:"text-blue-100 flex items-center gap-2",children:[(0,n.jsx)(u.A,{className:"w-4 h-4"}),(null==(A=J.teacher)||null==(j=A.user)?void 0:j.name)||(null==(S=J.creator)?void 0:S.name)]}):null]})})}),J.description&&(0,n.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,n.jsx)("p",{className:"text-gray-800 text-base leading-relaxed whitespace-pre-line",children:J.description})}),Array.isArray(ed)&&ed.length>0&&(0,n.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Tautan Referensi"}),(0,n.jsx)("div",{className:"space-y-2",children:ed.map((e,l)=>(0,n.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(c.A,{className:"w-5 h-5 text-blue-600"})}),(0,n.jsx)("div",{className:"flex-1 min-w-0",children:(0,n.jsx)("p",{className:"text-sm font-medium text-blue-600 group-hover:underline truncate",children:e})}),(0,n.jsx)(m.A,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600"})]},l))})]}),(0,n.jsxs)("div",{className:"px-6 py-5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3 uppercase tracking-wide",children:"Lampiran"}),eo.length>0?(0,n.jsx)("div",{className:"space-y-2",children:eo.map((e,l)=>{var s;let i=e.name||e.original_name||w(e.path);return(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3 p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all group",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(x.A,{className:"w-5 h-5 text-red-600"})}),(0,n.jsx)("div",{className:"min-w-0 flex-1",children:(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:i})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>(e=>{if(null==e?void 0:e.path){if("link"===e.type)return void window.open(e.path,"_blank","noopener,noreferrer");e.id&&(null==J?void 0:J.id)&&W.push("/edu/tugas/".concat(J.id,"/view/").concat(e.id))}})(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Buka",children:(0,n.jsx)(m.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{onClick:()=>{eu(e)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Unduh",children:(0,n.jsx)(h.A,{className:"w-4 h-4"})})]})]},String(null!=(s=e.id)?s:l))})}):(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,n.jsx)(x.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-sm",children:"Tidak ada lampiran"})]})]})]}),(null==z?void 0:z.role)==="guru"&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,n.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Daftar Siswa"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[eh.size," dari ",ex.length," siswa telah mengumpulkan"]})]}),(0,n.jsx)("div",{className:"divide-y divide-gray-200",children:em?0===ex.length?(0,n.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:(0,n.jsx)("p",{children:"Tidak ada data siswa untuk kelas ini."})}):ex.map(e=>{var l,s,i,a,t,r,d,o;let u=null==e?void 0:e.id,c=null!=u&&eh.has(String(u)),b=c?eg(u):null,v=null!=(a=null!=(i=null==b?void 0:b.grade)?i:null==b?void 0:b.score)?a:null==b?void 0:b.value,f=c?null==b?void 0:b.files:null,j=(Array.isArray(f)?f:[]).map((e,l)=>e?"string"==typeof e?{id:l,path:e}:"object"==typeof e?e:null:null).filter(e=>!!e&&(!!e.path||!!e.url)),y=j.length>0;return(0,n.jsxs)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold",children:(null!=(r=null!=(t=null==e||null==(l=e.user)?void 0:l.name)?t:null==e?void 0:e.name)?r:"?").charAt(0).toUpperCase()}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:null!=(o=null!=(d=null==e||null==(s=e.user)?void 0:s.name)?d:null==e?void 0:e.name)?o:"Siswa ".concat(u)}),(null==e?void 0:e.nis)&&(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:["NIS: ",e.nis]})]})]}),(0,n.jsx)("div",{className:"flex items-center gap-3",children:c?(0,n.jsxs)(n.Fragment,{children:[null!=v&&(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-lg font-bold text-green-600",children:String(v)}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"/ 100"})]}),(0,n.jsx)("button",{onClick:()=>{ep(e)},className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",disabled:el===String(u),children:el===String(u)?"Menyimpan...":null!=v?"Edit Nilai":"Beri Nilai"})]}):(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-full bg-orange-100 text-orange-700 font-medium",children:[(0,n.jsx)(g.A,{className:"w-3.5 h-3.5"}),"Belum dikerjakan"]})})]}),c&&y&&(0,n.jsxs)("div",{className:"mt-3 rounded-xl border border-blue-100 bg-blue-50/60 px-4 py-3",children:[(0,n.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 flex items-center gap-2",children:[(0,n.jsx)(p.A,{className:"w-3.5 h-3.5"}),"Lampiran Pengumpulan"]}),(0,n.jsx)("div",{className:"mt-2 space-y-2",children:j.map((e,l)=>{var s;let i=e.name||e.original_name||w(e.path||e.url||""),a=k(e);return(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-blue-100 bg-white px-3 py-2 text-sm shadow-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,n.jsx)(x.A,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,n.jsx)("a",{href:a||void 0,target:a?"_blank":void 0,rel:a?"noopener noreferrer":void 0,className:"truncate font-medium text-blue-700 hover:underline",children:i||"Lampiran"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{type:"button",onClick:()=>ec(a),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Buka lampiran",children:(0,n.jsx)(m.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:()=>ec(a),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Unduh",children:(0,n.jsx)(h.A,{className:"w-4 h-4"})})]})]},String(null!=(s=e.id)?s:"".concat(u,"-").concat(l)))})})]})]},String(u))}):(0,n.jsx)("div",{className:"px-6 py-8 text-center text-gray-500",children:(0,n.jsx)("p",{children:"Kelas untuk tugas ini tidak ditemukan."})})})]})]}),(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"sticky top-24 space-y-4",children:[(null==z?void 0:z.role)==="siswa"&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,n.jsx)("div",{className:"px-5 py-4 border-b border-gray-200 bg-gray-50",children:(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"Status Pengerjaan"})}),(0,n.jsx)("div",{className:"px-5 py-5",children:en?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,n.jsx)(b.A,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"Sudah Dikumpulkan"}),(0,n.jsx)("p",{className:"text-xs text-green-600 mt-0.5",children:(null==ei?void 0:ei.submitted_at)?N(ei.submitted_at):""})]})]}),et.length>0&&(0,n.jsxs)("div",{className:"rounded-lg border border-blue-100 bg-blue-50/60 px-4 py-3",children:[(0,n.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-700 flex items-center gap-2",children:[(0,n.jsx)(p.A,{className:"w-3.5 h-3.5"}),"Lampiran Pengumpulan Anda"]}),(0,n.jsx)("div",{className:"mt-2 space-y-2",children:et.map((e,l)=>{var s;let i=e.name||e.original_name||w(e.path||e.url||""),a=k(e);return(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-blue-100 bg-white px-3 py-2 text-sm shadow-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,n.jsx)(x.A,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,n.jsx)("a",{href:a||void 0,target:a?"_blank":void 0,rel:a?"noopener noreferrer":void 0,className:"truncate font-medium text-blue-700 hover:underline",children:i||"Lampiran ".concat(l+1)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{type:"button",onClick:()=>ec(a),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Buka lampiran",children:(0,n.jsx)(m.A,{className:"w-4 h-4"})}),(0,n.jsx)("button",{type:"button",onClick:()=>ec(a),className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors",title:"Unduh",children:(0,n.jsx)(h.A,{className:"w-4 h-4"})})]})]},String(null!=(s=e.id)?s:"me-".concat(l)))})})]}),null!=ea&&(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Nilai Anda"}),(0,n.jsx)("p",{className:"text-4xl font-bold text-green-600",children:String(ea)}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"/ 100"})]}),(null==ei?void 0:ei.feedback)&&(0,n.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,n.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Feedback Guru"}),(0,n.jsx)("p",{className:"text-sm text-blue-800",children:ei.feedback})]})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[(0,n.jsx)(g.A,{className:"w-6 h-6 text-orange-600 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-orange-800",children:"Belum Dikumpulkan"}),(0,n.jsx)("p",{className:"text-xs text-orange-600 mt-0.5",children:"Segera kumpulkan tugas Anda"})]})]}),(0,n.jsx)("button",{onClick:()=>ee(!0),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm",disabled:!(null==J?void 0:J.id),children:"Kumpulkan Tugas"})]})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,n.jsx)("div",{className:"px-5 py-4 border-b border-gray-200 bg-gray-50",children:(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"Tenggat Waktu"})}),(0,n.jsx)("div",{className:"px-5 py-5",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(v.A,{className:"w-5 h-5 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Deadline"}),(0,n.jsx)("p",{className:"text-base font-semibold text-gray-900 mt-0.5",children:N(J.deadline)})]})]})})]}),((null==(C=J.teacher)||null==(_=C.user)?void 0:_.name)||(null==(M=J.creator)?void 0:M.name))&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,n.jsx)("div",{className:"px-5 py-4 border-b border-gray-200 bg-gray-50",children:(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"Guru"})}),(0,n.jsx)("div",{className:"px-5 py-5",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-semibold",children:((null==(B=J.teacher)||null==(T=B.user)?void 0:T.name)||(null==(D=J.creator)?void 0:D.name)||"?").charAt(0).toUpperCase()}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:(null==(L=J.teacher)||null==(I=L.user)?void 0:I.name)||(null==(E=J.creator)?void 0:E.name)}),(null==(U=J.teacher)?void 0:U.specialization)&&(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:J.teacher.specialization})]})]})})]})]})})]})]}),(null==z?void 0:z.role)==="siswa"&&!en&&(0,n.jsx)(f.A,{isOpen:$,onClose:()=>ee(!1),tugasId:String(null!=(G=null!=(O=null==J?void 0:J.id)?O:H)?G:""),tugasTitle:null!=(F=null==J?void 0:J.title)?F:"Tugas",deadline:null!=(P=null==J?void 0:J.deadline)?P:new Date().toISOString(),onUploadComplete:er})]})}}},e=>{e.O(0,[8320,5125,7715,2929,8441,1255,7358],()=>e(e.s=47904)),_N_E=e.O()}]);