(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561],{6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11094:(e,t,r)=>{Promise.resolve().then(r.bind(r,88576))},18514:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},65229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},66348:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(95125),s=r(72378);let i=a.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=s.A.get("portal-auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n=i},71360:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:o="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:l?24*Number(d)/Number(s):d,className:i("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:l,...o}=r;return(0,a.createElement)(d,{ref:n,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...o})});return r.displayName=s(e),r}},72378:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,i){if("undefined"!=typeof document){"number"==typeof(i=a({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var d in i)i[d]&&(n+="; "+d,!0!==i[d]&&(n+="="+i[d].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+n}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},s=0;s<r.length;s++){var i=r[s].split("="),n=i.slice(1).join("=");try{var d=decodeURIComponent(i[0]);if(a[d]=t.read(n,d),e===d)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){s(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},83011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(12115);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=i(e,a)),t&&(s.current=i(t,a))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88576:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(95155),s=r(12115),i=r(15239),n=r(68407),d=r.n(n),l=r(6191),o=r(18514),c=r(71360),u=r(65229),m=r(66348);function p(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)({}),[p,h]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),x=(0,s.useRef)(null),b=async()=>{try{let e=await m.A.get("/news");if(e.data.success||Array.isArray(e.data.data)){let r=(e.data.data||e.data).map(e=>({...e,image:e.image?e.image.startsWith("http://")?e.image.replace("http://","https://"):e.image.startsWith("https://")?e.image:"https://api.smkprestasiprima.sch.id".concat(e.image.startsWith("/")?"":"/").concat(e.image):""}));t(r)}else console.warn("⚠️ Format data berita tidak sesuai:",e.data)}catch(e){console.error("❌ Gagal memuat berita:",e),d().fire("Gagal","Tidak bisa memuat berita dari server.","error")}};(0,s.useEffect)(()=>{b()},[]);let y=async()=>{if(!r.title_id||!r.title_en||!r.desc_id||!r.desc_en||!r.date)return void d().fire("Lengkapi Data","Semua field wajib diisi!","warning");let e=new FormData;e.append("title_id",r.title_id),e.append("title_en",r.title_en),e.append("desc_id",r.desc_id),e.append("desc_en",r.desc_en),e.append("date",r.date),r.imageFile&&e.append("image",r.imageFile);try{p?(e.append("_method","PUT"),await m.A.post("/news/".concat(p),e,{headers:{"Content-Type":"multipart/form-data"}})):await m.A.post("/news",e,{headers:{"Content-Type":"multipart/form-data"}}),d().fire("Berhasil!",p?"Berita diperbarui.":"Berita ditambahkan.","success"),g(!1),n({}),h(null),b()}catch(e){var t,a;console.error("❌ Gagal menyimpan:",e),d().fire("Gagal",(null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Upload gagal","error")}},v=async e=>{if((await d().fire({title:"Hapus Berita?",text:"Data yang dihapus tidak bisa dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#FE4D01",cancelButtonColor:"#243771",confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed)try{await m.A.delete("/news/".concat(e)),d().fire("Terhapus!","Berita berhasil dihapus.","success"),b()}catch(e){var t,r;console.error("❌ Gagal menghapus:",e),d().fire("Gagal",(null==(r=e.response)||null==(t=r.data)?void 0:t.message)||"Tidak dapat menghapus berita.","error")}};return(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&g(!1)},t=e=>"Escape"===e.key&&g(!1);return f&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",t)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[f]),(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-[#f5f7ff] via-[#fffdfb] to-[#fff5f0] px-4 py-10 md:px-10",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto bg-white rounded-md shadow-md border border-gray-100 p-5 sm:p-8 relative z-10",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#243771]",children:"\uD83D\uDCF0 Manajemen Berita"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Kelola seluruh berita sekolah"})]}),(0,a.jsxs)("button",{onClick:()=>{n({}),h(null),g(!0)},className:"flex items-center gap-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white px-4 py-2 rounded-md font-medium shadow-sm hover:shadow-md transition w-full sm:w-auto justify-center",children:[(0,a.jsx)(l.A,{size:18})," Tambah Berita"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto border border-gray-200 rounded-md",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-[#243771] to-[#3b5bb1] text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-center w-[50px]",children:"#"}),(0,a.jsx)("th",{className:"p-3",children:"Judul (ID)"}),(0,a.jsx)("th",{className:"p-3 text-center",children:"Tanggal"}),(0,a.jsx)("th",{className:"p-3 text-center",children:"Gambar"}),(0,a.jsx)("th",{className:"p-3 text-center",children:"Aksi"})]})}),(0,a.jsx)("tbody",{children:e.length>0?e.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b hover:bg-[#f9fafc] transition",children:[(0,a.jsx)("td",{className:"p-3 text-center font-medium text-[#243771]",children:t+1}),(0,a.jsx)("td",{className:"p-3 text-gray-700",children:e.title_id}),(0,a.jsx)("td",{className:"p-3 text-center text-gray-600",children:new Date(e.date).toLocaleDateString("id-ID")}),(0,a.jsx)("td",{className:"p-3 text-center",children:e.image?(0,a.jsx)(i.default,{src:e.image,alt:e.title_id,width:100,height:70,className:"rounded-sm border border-gray-200 object-cover mx-auto"}):(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Tidak ada"})}),(0,a.jsxs)("td",{className:"p-3 flex justify-center gap-2 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>{h(e.id),n({title_id:e.title_id,title_en:e.title_en,desc_id:e.desc_id,desc_en:e.desc_en,date:e.date,image:e.image,imageFile:null}),g(!0)},className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-sm transition w-[42px]",children:(0,a.jsx)(o.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-sm transition w-[42px]",children:(0,a.jsx)(c.A,{size:16})})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center py-6 text-gray-500 italic",children:"Belum ada berita."})})})]})})]}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,a.jsxs)("div",{ref:x,className:"bg-white rounded-md w-full max-w-2xl shadow-2xl border border-gray-200 animate-fadeIn relative z-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-5 py-4 border-b border-gray-200 bg-gradient-to-r from-[#243771]/90 to-[#FE4D01]/80 text-white rounded-t-md",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:p?"Edit Berita":"Tambah Berita"}),(0,a.jsx)("button",{onClick:()=>g(!1),children:(0,a.jsx)(u.A,{size:20,className:"opacity-80 hover:opacity-100"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Judul (Indonesia)",className:"border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-[#FE4D01]",value:r.title_id||"",onChange:e=>n({...r,title_id:e.target.value})}),(0,a.jsx)("input",{type:"text",placeholder:"Judul (English)",className:"border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-[#FE4D01]",value:r.title_en||"",onChange:e=>n({...r,title_en:e.target.value})})]}),(0,a.jsx)("textarea",{placeholder:"Deskripsi (Indonesia)",className:"border border-gray-300 p-2 w-full rounded-md focus:ring-2 focus:ring-[#243771]",rows:3,value:r.desc_id||"",onChange:e=>n({...r,desc_id:e.target.value})}),(0,a.jsx)("textarea",{placeholder:"Deskripsi (English)",className:"border border-gray-300 p-2 w-full rounded-md focus:ring-2 focus:ring-[#243771]",rows:3,value:r.desc_en||"",onChange:e=>n({...r,desc_en:e.target.value})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"date",className:"border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-[#FE4D01]",value:r.date||"",onChange:e=>n({...r,date:e.target.value})}),(0,a.jsx)("input",{type:"file",accept:".webp,.jpg,.jpeg,.png",className:"border border-gray-300 p-2 rounded-md focus:ring-2 focus:ring-[#243771]",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(![".webp",".jpg",".jpeg",".png"].some(e=>r.name.toLowerCase().endsWith(e)))return void d().fire("Format Salah","Gunakan gambar .webp, .jpg, atau .png","warning");n(e=>({...e,imageFile:r}))}}})]}),(r.image||r.imageFile)&&(0,a.jsx)("div",{className:"text-center mt-2",children:(0,a.jsx)(i.default,{src:r.imageFile?URL.createObjectURL(r.imageFile):r.image||"",alt:"Preview",width:300,height:160,className:"rounded-sm border border-gray-200 object-cover mx-auto"})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-3 px-5 py-4 border-t border-gray-200 bg-gray-50 rounded-b-md",children:[(0,a.jsx)("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-sm text-gray-600 hover:bg-gray-100 transition",children:"Batal"}),(0,a.jsx)("button",{onClick:y,className:"px-4 py-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white rounded-sm hover:scale-[1.03] transition",children:"Simpan"})]})]})})]})}}},e=>{e.O(0,[8320,5125,5239,8441,1255,7358],()=>e(e.s=11094)),_N_E=e.O()}]);