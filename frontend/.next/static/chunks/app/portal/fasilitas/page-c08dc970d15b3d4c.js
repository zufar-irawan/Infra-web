(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{727:(e,t,a)=>{Promise.resolve().then(a.bind(a,74692))},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18514:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:d?24*Number(n)/Number(s):n,className:i("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:d,...c}=a;return(0,r.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return a.displayName=s(e),a}},74692:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155),s=a(12115),i=a(15239),l=a(68407),n=a.n(l),d=a(71360),c=a(6191),o=a(71847);let u=(0,o.A)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=(0,o.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var h=a(18514),f=a(65229);function p(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[o,p]=(0,s.useState)({img_id:null,img_en:null,category:""}),[x,g]=(0,s.useState)(null),[b,y]=(0,s.useState)(!1),j=(0,s.useRef)(null),w=async()=>{try{let e=await fetch("/api/portal/facilities",{cache:"no-store"}),a=await e.json();if(a.success)t(a.data);else throw Error(a.message)}catch(e){console.error("❌ Gagal memuat fasilitas:",e),n().fire("Gagal","Tidak bisa memuat data fasilitas","error")}};(0,s.useEffect)(()=>{w()},[]);let v=(e,t)=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(r){if(!r.name.endsWith(".webp"))return void n().fire("Format Salah","Gunakan gambar berformat .webp","warning");p(e=>({...e,["id"===t?"img_id":"img_en"]:r}))}},N=async()=>{if(!o.category)return void n().fire("Lengkapi Data","Kategori wajib diisi.","warning");let e=new FormData;e.append("category",o.category),o.img_id&&e.append("img_id",o.img_id),o.img_en&&e.append("img_en",o.img_en);try{let t=await fetch(x?"/api/portal/facilities/".concat(x):"/api/portal/facilities",{method:"POST",body:e}),a=await t.json();if(!a.success)throw Error(a.message);n().fire("Berhasil!",x?"Data fasilitas diperbarui.":"Data fasilitas ditambahkan.","success"),y(!1),p({img_id:null,img_en:null,category:""}),g(null),w()}catch(e){console.error("❌ Gagal menyimpan:",e),n().fire("Gagal",e.message||"Upload gagal","error")}},k=e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=async()=>{if(0===a.length)return void n().fire("Tidak ada yang dipilih","Pilih minimal satu data.","info");if((await n().fire({title:"Hapus Data?",text:"".concat(a.length," fasilitas akan dihapus."),icon:"warning",showCancelButton:!0,confirmButtonColor:"#FE4D01",cancelButtonColor:"#243771",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed)try{await Promise.all(a.map(e=>fetch("/api/portal/facilities/".concat(e),{method:"DELETE"}))),n().fire("Terhapus!","Data fasilitas telah dihapus.","success"),l([]),w()}catch(e){n().fire("Gagal","Tidak dapat menghapus fasilitas.","error")}};return(0,s.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&y(!1)},t=e=>"Escape"===e.key&&y(!1);return b&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",t)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[b]),(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-[#f5f7ff] via-[#fffdfb] to-[#fef6f0] px-4 py-10 md:px-10",children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto bg-white rounded-md shadow-md border border-gray-100 p-5 sm:p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#243771]",children:"\uD83C\uDFEB Manajemen Fasilitas"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Kelola seluruh fasilitas sekolah"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[a.length>0&&(0,r.jsxs)("button",{onClick:_,className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition",children:[(0,r.jsx)(d.A,{size:18})," Hapus Terpilih"]}),(0,r.jsxs)("button",{onClick:()=>{p({img_id:null,img_en:null,category:""}),g(null),y(!0)},className:"flex items-center gap-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white px-4 py-2 rounded-md font-medium shadow-sm hover:shadow-md transition",children:[(0,r.jsx)(c.A,{size:18})," Tambah Fasilitas"]})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto border border-gray-200 rounded-md",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-[#243771] to-[#3b5bb1] text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 w-[40px] text-center"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"ID"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Gambar (ID)"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Gambar (EN)"}),(0,r.jsx)("th",{className:"p-3",children:"Kategori"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Aksi"})]})}),(0,r.jsx)("tbody",{children:e.length>0?e.map(e=>(0,r.jsxs)("tr",{className:"border-b ".concat(a.includes(e.id)?"bg-[#fff0e6]":"hover:bg-[#f9fafc]"," transition"),children:[(0,r.jsx)("td",{className:"p-3 text-center cursor-pointer",onClick:()=>k(e.id),children:a.includes(e.id)?(0,r.jsx)(u,{size:18,className:"text-[#FE4D01]"}):(0,r.jsx)(m,{size:18,className:"text-gray-400"})}),(0,r.jsx)("td",{className:"p-3 text-center font-medium text-[#243771]",children:e.id}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)(i.default,{src:e.img_id,alt:"Gambar ID",width:60,height:60,className:"rounded-sm border border-gray-200 object-cover mx-auto"})}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)(i.default,{src:e.img_en,alt:"Gambar EN",width:60,height:60,className:"rounded-sm border border-gray-200 object-cover mx-auto"})}),(0,r.jsx)("td",{className:"p-3 text-gray-700",children:e.category}),(0,r.jsxs)("td",{className:"p-3 flex justify-center gap-2 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{g(e.id),p({img_id:null,img_en:null,category:e.category}),y(!0)},className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-sm transition",children:(0,r.jsx)(h.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>k(e.id),className:"p-2 ".concat(a.includes(e.id)?"bg-gray-300":"bg-gray-100 hover:bg-gray-200"," rounded-sm text-[#243771] transition"),children:a.includes(e.id)?"✓":"Pilih"})]})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"text-center py-6 text-gray-500 italic",children:"Belum ada data fasilitas."})})})]})})]}),b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",children:(0,r.jsxs)("div",{ref:j,className:"bg-white rounded-md w-full max-w-md shadow-2xl border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-5 py-4 bg-gradient-to-r from-[#243771]/90 to-[#FE4D01]/80 text-white",children:[(0,r.jsx)("h2",{className:"font-semibold text-lg",children:x?"Edit Fasilitas":"Tambah Fasilitas"}),(0,r.jsx)("button",{onClick:()=>y(!1),children:(0,r.jsx)(f.A,{size:20})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Kategori"}),(0,r.jsxs)("select",{value:o.category,onChange:e=>p({...o,category:e.target.value}),className:"w-full border p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Kategori --"}),["Laboratorium & Studio","Fasilitas Akademik","Fasilitas Olahraga","Fasilitas Umum"].map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Gambar Bahasa Indonesia (.webp)"}),(0,r.jsx)("input",{type:"file",accept:".webp",onChange:e=>v(e,"id"),className:"w-full border p-2 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Gambar Bahasa Inggris (.webp)"}),(0,r.jsx)("input",{type:"file",accept:".webp",onChange:e=>v(e,"en"),className:"w-full border p-2 rounded"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4 bg-gray-50 border-t",children:[(0,r.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 border rounded",children:"Batal"}),(0,r.jsx)("button",{onClick:N,className:"px-4 py-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white rounded",children:"Simpan"})]})]})})]})}},83011:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=a(12115);function s(e,t){let a=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(a.current=i(e,r)),t&&(s.current=i(t,r))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[8320,5239,8441,1255,7358],()=>e(e.s=727)),_N_E=e.O()}]);