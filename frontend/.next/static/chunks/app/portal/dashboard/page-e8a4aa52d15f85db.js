(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4990],{28369:(e,t,r)=>{Promise.resolve().then(r.bind(r,92857))},30722:function(e,t,r){e.exports=function(e,t){"use strict";let r=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],a=()=>{};return function(n){function i(t){let a={},n={},i=r.map(e=>e.key);return Object.entries(t).forEach(t=>{let[r,s]=t;i.includes(r)&&e.isValidElement(s)?(a[r]=s,n[r]=" "):n[r]=s}),[a,n]}function s(e,a){Object.entries(a).forEach(a=>{let[i,s]=a,o=r.find(e=>e.key===i).getter(n),l=t.createRoot(o);l.render(s),e.__roots.push(l)})}function o(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends n{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return n.argsToParams(t);{let e={};return["title","html","icon"].forEach((r,a)=>{void 0!==t[a]&&(e[r]=t[a])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[r,n]=i(this.__params),l=n.willOpen||a,c=n.didOpen||a,d=n.didDestroy||a;return super._main(Object.assign({},n,{willOpen:e=>{s(this,r),l(e)},didOpen:e=>{setTimeout(()=>{c(e)})},didDestroy:e=>{d(e),o(this)}}))}update(e){Object.assign(this.__params,e),o(this);let[t,r]=i(this.__params);super.update(r),s(this,t)}}}}(r(12115),r(12669))},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},66348:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(95125),n=r(72378);let i=a.A.create({baseURL:"https://api.smkprestasiprima.sch.id/api",headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=n.A.get("portal-auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let s=i},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(12115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...s,width:n,height:n,stroke:r,strokeWidth:l?24*Number(o)/Number(n):o,className:i("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:l,...c}=r;return(0,a.createElement)(o,{ref:s,iconNode:t,className:i("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return r.displayName=n(e),r}},72378:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>n});var n=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=a({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in i)i[o]&&(s+="; "+o,!0!==i[o]&&(s+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var i=r[n].split("="),s=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(a[o]=t.read(s,o),e===o)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){n(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},84926:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},92857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(95155),n=r(12115),i=r(66348),s=r(72378),o=r(68407),l=r.n(o),c=r(30722),d=r.n(c),m=r(35299),u=r(84926);let h=d()(l());function f(){let[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{var e,r,a;try{let r=s.A.get("portal-auth-token");if(!r)return await c("Belum Login","Silakan login terlebih dahulu.","warning");let[a,n]=await Promise.all([i.A.get("/auth/check-token",{headers:{Authorization:"Bearer ".concat(r)}}),i.A.get("/portal/dashboard",{headers:{Authorization:"Bearer ".concat(r)}})]);a.data.success&&n.data.success?t({name:(null==(e=n.data.message)?void 0:e.replace("Selamat datang, ",""))||"Admin",email:n.data.email||a.data.email}):await c("Token Tidak Valid","Silakan login ulang.","warning")}catch(e){await c("Sesi Berakhir",(null==(a=e.response)||null==(r=a.data)?void 0:r.message)||"Server tidak merespons atau token tidak valid.","error")}finally{o(!1)}})()},[]);let l=async()=>{try{let e=s.A.get("portal-auth-token");await i.A.post("/auth/logout",{},{headers:{Authorization:"Bearer ".concat(e)}}),s.A.remove("portal-auth-token"),await h.fire({icon:"success",title:"Logout Berhasil",text:"Anda telah keluar dari Portal Admin.",showConfirmButton:!1,timer:1500}),window.location.href="/portal"}catch(e){s.A.remove("portal-auth-token"),window.location.href="/portal"}},c=async(e,t,r)=>{s.A.remove("portal-auth-token"),await h.fire({icon:r,title:e,text:t,confirmButtonColor:"#FE4D01"}),window.location.href="/portal"};return r?(0,a.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-[#f5f7ff] via-[#fffdfb] to-[#fef6f0] text-[#243771]",children:[(0,a.jsx)(m.A,{className:"animate-spin mb-3",size:32}),(0,a.jsx)("p",{className:"font-medium animate-pulse text-[#555]",children:"Memuat dashboard..."})]}):(0,a.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-[#f5f7ff] via-[#fffdfb] to-[#fff5f0] px-3 sm:px-6 md:px-10 py-8 sm:py-12",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl mx-auto bg-white rounded-md shadow-md border border-gray-100 p-5 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#243771] leading-tight",children:"\uD83C\uDFAF Dashboard Admin"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Selamat datang kembali di Portal Admin"})]}),(0,a.jsx)("div",{className:"flex justify-center sm:justify-end",children:(0,a.jsxs)("button",{onClick:l,className:"flex items-center gap-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white px-5 py-2.5 rounded-md font-medium shadow-sm hover:shadow-md active:scale-[0.98] transition text-sm sm:text-base",children:[(0,a.jsx)(u.A,{size:18})," Keluar"]})})]}),(0,a.jsxs)("section",{className:"text-center border-t border-gray-200 pt-6",children:[(0,a.jsxs)("h2",{className:"text-[1.6rem] sm:text-[1.9rem] font-bold text-[#243771] mb-1 leading-tight",children:["Halo,\xa0",(0,a.jsx)("span",{className:"text-[#FE4D01]",children:(null==e?void 0:e.name)||"Admin"})]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm sm:text-base break-all",children:null==e?void 0:e.email})]}),(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsxs)("div",{className:"bg-[#fff8f4] border border-[#ffd6ba] rounded-md shadow-inner px-5 py-5 sm:px-8 sm:py-6 max-w-2xl mx-auto text-center",children:[(0,a.jsx)("p",{className:"text-gray-800 font-medium text-lg mb-1",children:"\uD83C\uDF89 Portal siap digunakan!"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Anda bisa menambahkan atau mengatur konten admin dari menu sebelah kiri."})]})}),(0,a.jsxs)("div",{className:"text-center text-gray-400 text-sm border-t border-gray-200 pt-6 mt-10",children:["\xa9 ",new Date().getFullYear()," Portal Admin â€” SMK Prestasi Prima"]})]})})}}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=28369)),_N_E=e.O()}]);