(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1373],{6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18514:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},65229:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(12115);let i=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},s=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:o="",children:c,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:a,...n,width:i,height:i,stroke:t,strokeWidth:l?24*Number(d)/Number(i):d,className:s("lucide",o),...!c&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(c)?c:[c]])}),l=(e,a)=>{let t=(0,r.forwardRef)((t,n)=>{let{className:l,...o}=t;return(0,r.createElement)(d,{ref:n,iconNode:a,className:s("lucide-".concat(i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...o})});return t.displayName=i(e),t}},78234:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var r=t(95155),i=t(12115),s=t(68407),n=t.n(s),d=t(95125),l=t(6191),o=t(18514),c=t(71360),m=t(65229);function u(){let[e,a]=(0,i.useState)([]),[t,s]=(0,i.useState)({}),[u,g]=(0,i.useState)(null),[p,h]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),b=(0,i.useRef)(null),j=async()=>{try{let e=await d.A.get("/api/portal/mitra");(e.data.success||e.data.data)&&a(e.data.data||e.data)}catch(e){console.error("❌ Gagal memuat mitra:",e),n().fire("Gagal","Tidak bisa memuat data mitra.","error")}};(0,i.useEffect)(()=>{j()},[]);let y=(e,a)=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(![".webp",".jpg",".jpeg",".png",".svg"].some(e=>r.name.toLowerCase().endsWith(e)))return void n().fire("Format Salah","Gunakan gambar .webp, .jpg, .png, atau .svg","warning");"id"===a&&s(e=>({...e,imgIdFile:r})),"en"===a&&s(e=>({...e,imgEnFile:r}))}},w=async()=>{if(!t.name)return void n().fire("Lengkapi Data","Nama mitra wajib diisi!","warning");let e=new FormData;e.append("name",t.name),t.imgIdFile&&e.append("img_id",t.imgIdFile),t.imgEnFile&&e.append("img_en",t.imgEnFile);try{f(!0),await (0,d.A)({method:u?"put":"post",url:u?"/api/portal/mitra/".concat(u):"/api/portal/mitra",data:e,headers:{"Content-Type":"multipart/form-data"}}),n().fire("Berhasil!",u?"Data mitra diperbarui.":"Data mitra ditambahkan.","success"),h(!1),s({}),g(null),j()}catch(e){var a,r;console.error("❌ Gagal menyimpan mitra:",e),n().fire("Gagal",(null==(r=e.response)||null==(a=r.data)?void 0:a.message)||"Upload gagal","error")}finally{f(!1)}},v=async e=>{if((await n().fire({title:"Hapus Mitra?",text:"Data yang dihapus tidak dapat dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#FE4D01",cancelButtonColor:"#243771",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed)try{await d.A.delete("/api/portal/mitra/".concat(e)),n().fire("Terhapus!","Mitra berhasil dihapus.","success"),j()}catch(e){n().fire("Gagal","Tidak dapat menghapus mitra.","error")}};(0,i.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&h(!1)},a=e=>"Escape"===e.key&&h(!1);return p&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",a)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[p]);let N=e=>e?e.startsWith("http")?e:"".concat("https://api.smkprestasiprima.sch.id").concat(e):"";return(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-[#f5f7ff] via-[#fffdfb] to-[#fff5f0] px-4 py-10 md:px-10",children:[(0,r.jsxs)("div",{className:"relative z-10 max-w-6xl mx-auto bg-white rounded-md shadow-md border border-gray-100 p-5 sm:p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#243771]",children:"\uD83E\uDD1D Manajemen Mitra Industri"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Kelola seluruh mitra industri sekolah"})]}),(0,r.jsxs)("button",{onClick:()=>{s({}),g(null),h(!0)},className:"flex items-center gap-2 bg-gradient-to-r from-[#FE4D01] to-[#ff7433] text-white px-4 py-2 rounded-md font-medium shadow-sm hover:shadow-md transition w-full sm:w-auto justify-center",children:[(0,r.jsx)(l.A,{size:18})," Tambah Mitra"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto border border-gray-200 rounded-md",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-[#243771] to-[#3b5bb1] text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 text-center w-[50px]",children:"#"}),(0,r.jsx)("th",{className:"p-3",children:"Nama"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Logo (ID)"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Logo (EN)"}),(0,r.jsx)("th",{className:"p-3 text-center",children:"Aksi"})]})}),(0,r.jsx)("tbody",{children:e.length>0?e.map((e,a)=>(0,r.jsxs)("tr",{className:"border-b hover:bg-[#f9fafc] transition",children:[(0,r.jsx)("td",{className:"p-3 text-center font-medium text-[#243771]",children:a+1}),(0,r.jsx)("td",{className:"p-3 text-gray-700",children:e.name}),(0,r.jsx)("td",{className:"p-3 text-center",children:e.img_id?(0,r.jsx)("img",{src:N(e.img_id),alt:"Logo ID",className:"h-20 w-auto object-contain mx-auto border border-gray-200 rounded-md"}):(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Tidak ada"})}),(0,r.jsx)("td",{className:"p-3 text-center",children:e.img_en?(0,r.jsx)("img",{src:N(e.img_en),alt:"Logo EN",className:"h-20 w-auto object-contain mx-auto border border-gray-200 rounded-md"}):(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Tidak ada"})}),(0,r.jsxs)("td",{className:"p-3 flex justify-center gap-2 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{g(e.id),s({name:e.name,img_id:e.img_id,img_en:e.img_en,imgIdFile:null,imgEnFile:null}),h(!0)},className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-sm transition w-[42px]",children:(0,r.jsx)(o.A,{size:16})}),(0,r.jsx)("button",{onClick:()=>v(e.id),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-sm transition w-[42px]",children:(0,r.jsx)(c.A,{size:16})})]})]},e.id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:5,className:"text-center py-6 text-gray-500 italic",children:"Belum ada mitra."})})})]})})]}),p&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 px-4",children:(0,r.jsxs)("div",{ref:b,className:"bg-white rounded-md w-full max-w-md shadow-2xl border border-gray-200 animate-fadeIn relative z-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-5 py-4 border-b border-gray-200 bg-gradient-to-r from-[#243771]/90 to-[#FE4D01]/80 text-white rounded-t-md",children:[(0,r.jsx)("h2",{className:"font-semibold text-lg",children:u?"Edit Mitra":"Tambah Mitra"}),(0,r.jsx)("button",{onClick:()=>h(!1),children:(0,r.jsx)(m.A,{size:20,className:"opacity-80 hover:opacity-100"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Nama Mitra",className:"border border-gray-300 p-2 w-full rounded-md focus:ring-2 focus:ring-[#FE4D01] focus:outline-none",value:t.name||"",onChange:e=>s({...t,name:e.target.value})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Logo Bahasa Indonesia"}),(0,r.jsx)("input",{type:"file",accept:".webp,.jpg,.jpeg,.png,.svg",className:"border border-gray-300 p-2 w-full rounded-md focus:ring-2 focus:ring-[#243771]",onChange:e=>y(e,"id")}),(t.imgIdFile||t.img_id)&&(0,r.jsx)("img",{src:t.imgIdFile?URL.createObjectURL(t.imgIdFile):N(t.img_id),alt:"Preview ID",className:"mt-2 rounded-md border border-gray-200 w-full h-24 object-contain"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Logo Bahasa Inggris"}),(0,r.jsx)("input",{type:"file",accept:".webp,.jpg,.jpeg,.png,.svg",className:"border border-gray-300 p-2 w-full rounded-md focus:ring-2 focus:ring-[#243771]",onChange:e=>y(e,"en")}),(t.imgEnFile||t.img_en)&&(0,r.jsx)("img",{src:t.imgEnFile?URL.createObjectURL(t.imgEnFile):N(t.img_en),alt:"Preview EN",className:"mt-2 rounded-md border border-gray-200 w-full h-24 object-contain"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4 border-t border-gray-200 bg-gray-50 rounded-b-md",children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-sm text-gray-600 hover:bg-gray-100 transition",children:"Batal"}),(0,r.jsx)("button",{onClick:w,disabled:x,className:"px-4 py-2 rounded-sm text-white transition ".concat(x?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-[#FE4D01] to-[#ff7433] hover:scale-[1.03]"),children:x?"Menyimpan...":"Simpan"})]})]})})]})}},99002:(e,a,t)=>{Promise.resolve().then(t.bind(t,78234))}},e=>{e.O(0,[8320,5125,8441,1255,7358],()=>e(e.s=99002)),_N_E=e.O()}]);